(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[724],{477:()=>{},3712:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});var a=r(9320),s=r(9917),l=r(2964);class i{static convertUser(e){return{uid:e.uid,email:e.email,displayName:e.displayName,phoneNumber:e.phoneNumber}}static async signUp(e){try{let t=(await (0,s.eJ)(a.j2,e.email,e.password)).user;return await (0,s.r7)(t,{displayName:e.fullName}),await (0,l.BN)((0,l.H9)(a.db,"users",t.uid),{fullName:e.fullName||"",phone:e.phone||"",email:t.email}),this.convertUser(t)}catch(e){throw Error(e.message||"Failed to create account")}}static async signIn(e){try{let t=await (0,s.x9)(a.j2,e.email,e.password);return this.convertUser(t.user)}catch(e){throw Error(e.message||"Failed to sign in")}}static async signOut(){try{await (0,s.CI)(a.j2)}catch(e){throw Error("Failed to sign out")}}static getCurrentUser(){return new Promise(e=>{let t=(0,s.hg)(a.j2,r=>{t(),e(r?this.convertUser(r):null)})})}static async sendPasswordResetEmail(e){try{await (0,s.J1)(a.j2,e)}catch(e){throw Error("Failed to send password reset email")}}static async updatePassword(e){if(!a.j2.currentUser)throw Error("No user is signed in.");try{await (0,s.f3)(a.j2.currentUser,e)}catch(e){throw Error("Failed to update password")}}static async updateProfile(e){if(!a.j2.currentUser)throw Error("No user is signed in.");try{e.displayName&&await (0,s.r7)(a.j2.currentUser,{displayName:e.displayName});let t=(0,l.H9)(a.db,"users",a.j2.currentUser.uid);return await (0,l.mZ)(t,{...e.phone&&{phone:e.phone},...e.displayName&&{fullName:e.displayName}}),this.convertUser(a.j2.currentUser)}catch(e){throw Error("Failed to update profile")}}static onAuthStateChange(e){return(0,s.hg)(a.j2,t=>{e(t?this.convertUser(t):null)})}}let o=i},5163:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>ez});var a=r(7876),s=r(4232),l=r(1777);let i=()=>(0,l.wA)(),o=l.d4;var n=r(9293),d=r(4e3),c=r(9516),m=r(5104),u=r(4463),x=r(2671),p=r(822),g=r(1449),h=r(395),b=r(672),y=r(8447),f=r(9917),j=r(6380);let v=e=>{let{userProfile:t,onAddApplication:r,onJobPreferences:l,onUpdateProfile:i,onFindMoreJobs:o}=e,n=(0,d.useRouter)(),[v,k]=(0,s.useState)(!1),[w,N]=(0,s.useState)(!1),[_,A]=(0,s.useState)(!1),E=async()=>{try{let e=(0,f.xI)();await (0,f.CI)(e),n.push("/login")}catch(e){console.error("Error signing out:",e)}},P=()=>{A(!0)},S=async()=>{try{let e=window.onbeforeunload;window.onbeforeunload=null;let t=(0,f.xI)().currentUser;if(t&&t.uid){let e="https://pay.rev.cat/sandbox/evfhfhevsehbykku/".concat(t.uid);window.location.href=e}else window.onbeforeunload=e,alert("Please log in to upgrade your subscription."),n.push("/login")}catch(e){console.error("Error getting user for upgrade:",e),alert("There was an error processing your request. Please try again.")}A(!1)},C=e=>{e(),k(!1),N(!1)};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("header",{className:"bg-white dark:bg-gray-800 shadow-sm border-b border-gray-200 dark:border-gray-700 sticky top-0 z-40",children:(0,a.jsxs)("div",{className:"max-w-7xl mx-auto px-3 sm:px-4 md:px-6 lg:px-8",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center h-14 sm:h-16",children:[(0,a.jsx)("div",{className:"flex items-center flex-shrink-0",children:(0,a.jsxs)("div",{className:"flex items-center space-x-2 sm:space-x-3",children:[(0,a.jsx)("button",{onClick:()=>n.push("/"),className:"w-7 h-7 sm:w-8 sm:h-8 bg-gradient-to-r from-blue-600 to-purple-600 rounded-lg flex items-center justify-center hover:from-blue-700 hover:to-purple-700 transition-all cursor-pointer",children:(0,a.jsx)("span",{className:"text-white font-bold text-xs sm:text-sm",children:"JS"})}),(0,a.jsx)("h1",{className:"text-base sm:text-lg md:text-xl font-semibold text-gray-900 dark:text-white hidden xs:block",children:"Job Search Dashboard"}),(0,a.jsx)("h1",{className:"text-base font-semibold text-gray-900 dark:text-white xs:hidden",children:"Dashboard"})]})}),(0,a.jsxs)("div",{className:"hidden lg:flex items-center space-x-3 xl:space-x-4",children:[o&&(0,a.jsxs)("button",{onClick:o,className:"bg-indigo-600 hover:bg-indigo-700 text-white px-3 py-2 xl:px-4 xl:py-2 rounded-lg flex items-center gap-2 transition-all text-sm font-medium",children:[(0,a.jsx)(c.A,{size:18}),(0,a.jsx)("span",{className:"hidden xl:inline",children:"Find Jobs"}),(0,a.jsx)("span",{className:"xl:hidden",children:"Find"})]}),(0,a.jsxs)("button",{onClick:r,className:"bg-emerald-600 hover:bg-emerald-700 text-white px-3 py-2 xl:px-4 xl:py-2 rounded-lg flex items-center gap-2 transition-all text-sm font-medium",children:[(0,a.jsx)(m.A,{size:18}),(0,a.jsx)("span",{className:"hidden xl:inline",children:"Manual Job Entry"}),(0,a.jsx)("span",{className:"xl:hidden",children:"Add Job"})]}),(0,a.jsxs)("button",{onClick:P,className:"bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 text-white px-3 py-2 xl:px-4 xl:py-2 rounded-lg flex items-center gap-2 transition-all text-sm font-medium shadow-lg hover:shadow-xl transform hover:scale-105 relative overflow-hidden group",children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-purple-400 to-pink-400 opacity-0 group-hover:opacity-20 transition-opacity"}),(0,a.jsx)(u.A,{size:18,className:"relative z-10"}),(0,a.jsx)("span",{className:"relative z-10 font-semibold",children:"Upgrade Pro"})]}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsxs)("button",{onClick:()=>{k(!v)},className:"flex items-center space-x-2 p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:[(0,a.jsx)("div",{className:"w-7 h-7 sm:w-8 sm:h-8 rounded-full bg-gray-200 dark:bg-gray-700 flex items-center justify-center text-gray-600 dark:text-gray-300",children:(0,a.jsx)(x.A,{size:16})}),(0,a.jsx)("span",{className:"text-sm text-gray-700 dark:text-gray-300 max-w-32 truncate",children:(null==t?void 0:t.full_name)||(null==t?void 0:t.email)||"User"}),(0,a.jsx)(p.A,{size:16,className:"text-gray-500 flex-shrink-0"})]}),v&&(0,a.jsx)("div",{className:"absolute right-0 mt-2 w-48 bg-white dark:bg-gray-800 rounded-md shadow-lg border border-gray-200 dark:border-gray-700 z-50",children:(0,a.jsxs)("div",{className:"py-1",children:[(0,a.jsxs)("button",{onClick:()=>C(i),className:"flex items-center w-full px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700",children:[(0,a.jsx)(x.A,{size:16,className:"mr-2"}),"Update Profile"]}),(0,a.jsxs)("button",{onClick:()=>C(l),className:"flex items-center w-full px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700",children:[(0,a.jsx)(g.A,{size:16,className:"mr-2"}),"Job Preferences"]}),(0,a.jsx)("hr",{className:"my-1 border-gray-200 dark:border-gray-600"}),(0,a.jsxs)("button",{onClick:E,className:"flex items-center w-full px-4 py-2 text-sm text-rose-600 hover:bg-gray-100 dark:hover:bg-gray-700",children:[(0,a.jsx)(h.A,{size:16,className:"mr-2"}),"Sign Out"]})]})})]})]}),(0,a.jsx)("div",{className:"lg:hidden",children:(0,a.jsx)("button",{onClick:()=>{N(!w)},className:"p-2 rounded-md text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:w?(0,a.jsx)(b.A,{size:20}):(0,a.jsx)(y.A,{size:20})})})]}),w&&(0,a.jsx)("div",{className:"lg:hidden border-t border-gray-200 dark:border-gray-700 py-3",children:(0,a.jsxs)("div",{className:"space-y-2",children:[o&&(0,a.jsxs)("button",{onClick:()=>{o(),N(!1)},className:"w-full bg-indigo-600 hover:bg-indigo-700 text-white px-4 py-2 rounded-lg flex items-center justify-center gap-2 transition-all text-sm font-medium",children:[(0,a.jsx)(c.A,{size:18}),"Find Jobs"]}),(0,a.jsxs)("button",{onClick:()=>{r(),N(!1)},className:"w-full bg-emerald-600 hover:bg-emerald-700 text-white px-4 py-2 rounded-lg flex items-center justify-center gap-2 transition-all text-sm font-medium",children:[(0,a.jsx)(m.A,{size:18}),"Manual Job Entry"]}),(0,a.jsxs)("button",{onClick:()=>{P(),N(!1)},className:"w-full bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 text-white px-4 py-3 rounded-lg flex items-center justify-center gap-2 transition-all text-sm font-semibold shadow-lg hover:shadow-xl relative overflow-hidden group",children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-purple-400 to-pink-400 opacity-0 group-hover:opacity-20 transition-opacity"}),(0,a.jsx)(u.A,{size:18,className:"relative z-10"}),(0,a.jsx)("span",{className:"relative z-10",children:"Upgrade to Pro"})]}),(0,a.jsxs)("div",{className:"pt-2 border-t border-gray-200 dark:border-gray-600 space-y-1",children:[(0,a.jsxs)("div",{className:"flex items-center px-2 py-2",children:[(0,a.jsx)("div",{className:"w-8 h-8 rounded-full bg-gray-200 dark:bg-gray-700 flex items-center justify-center text-gray-600 dark:text-gray-300 mr-3",children:(0,a.jsx)(x.A,{size:16})}),(0,a.jsx)("span",{className:"text-sm text-gray-700 dark:text-gray-300 font-medium",children:(null==t?void 0:t.full_name)||(null==t?void 0:t.email)||"User"})]}),(0,a.jsxs)("button",{onClick:()=>C(i),className:"w-full flex items-center px-2 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md",children:[(0,a.jsx)(x.A,{size:16,className:"mr-3"}),"Update Profile"]}),(0,a.jsxs)("button",{onClick:()=>C(l),className:"w-full flex items-center px-2 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md",children:[(0,a.jsx)(g.A,{size:16,className:"mr-3"}),"Job Preferences"]}),(0,a.jsxs)("button",{onClick:E,className:"w-full flex items-center px-2 py-2 text-sm text-rose-600 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md",children:[(0,a.jsx)(h.A,{size:16,className:"mr-3"}),"Sign Out"]})]})]})})]})}),(0,a.jsx)(j.A,{isOpen:_,onClose:()=>A(!1),onConfirm:S,userProfile:t})]})};var k=r(5390),w=r(3654),N=r(9976);let _=e=>{let{stats:t}=e;return(0,a.jsxs)("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-4 md:gap-6 mb-6 sm:mb-8",children:[(0,a.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-3 sm:p-4 lg:p-6 shadow-sm border border-gray-200 dark:border-gray-700 hover:shadow-md transition-shadow",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"p-1.5 sm:p-2 bg-blue-100 dark:bg-blue-900/30 rounded-lg flex-shrink-0",children:(0,a.jsx)(k.A,{className:"h-4 w-4 sm:h-5 sm:w-5 lg:h-6 lg:w-6 text-blue-600 dark:text-blue-400"})}),(0,a.jsxs)("div",{className:"ml-2 sm:ml-3 lg:ml-4 min-w-0 flex-1",children:[(0,a.jsx)("p",{className:"text-xs sm:text-sm font-medium text-gray-600 dark:text-gray-400 mb-1 truncate",children:"Total Applications"}),(0,a.jsx)("p",{className:"text-lg sm:text-xl lg:text-2xl font-semibold text-gray-900 dark:text-white",children:t.total})]})]})}),(0,a.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-3 sm:p-4 lg:p-6 shadow-sm border border-gray-200 dark:border-gray-700 hover:shadow-md transition-shadow",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"p-1.5 sm:p-2 bg-green-100 dark:bg-green-900/30 rounded-lg flex-shrink-0",children:(0,a.jsx)(w.A,{className:"h-4 w-4 sm:h-5 sm:w-5 lg:h-6 lg:w-6 text-green-600 dark:text-green-400"})}),(0,a.jsxs)("div",{className:"ml-2 sm:ml-3 lg:ml-4 min-w-0 flex-1",children:[(0,a.jsx)("p",{className:"text-xs sm:text-sm font-medium text-gray-600 dark:text-gray-400 mb-1 truncate",children:"Interviews Scheduled"}),(0,a.jsx)("p",{className:"text-lg sm:text-xl lg:text-2xl font-semibold text-gray-900 dark:text-white",children:t.interviews})]})]})}),(0,a.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-3 sm:p-4 lg:p-6 shadow-sm border border-gray-200 dark:border-gray-700 hover:shadow-md transition-shadow",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"p-1.5 sm:p-2 bg-yellow-100 dark:bg-yellow-900/30 rounded-lg flex-shrink-0",children:(0,a.jsx)(N.A,{className:"h-4 w-4 sm:h-5 sm:w-5 lg:h-6 lg:w-6 text-yellow-600 dark:text-yellow-400"})}),(0,a.jsxs)("div",{className:"ml-2 sm:ml-3 lg:ml-4 min-w-0 flex-1",children:[(0,a.jsx)("p",{className:"text-xs sm:text-sm font-medium text-gray-600 dark:text-gray-400 mb-1 truncate",children:"Offers Received"}),(0,a.jsx)("p",{className:"text-lg sm:text-xl lg:text-2xl font-semibold text-gray-900 dark:text-white",children:t.offers})]})]})}),(0,a.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-3 sm:p-4 lg:p-6 shadow-sm border border-gray-200 dark:border-gray-700 hover:shadow-md transition-shadow",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"p-1.5 sm:p-2 bg-purple-100 dark:bg-purple-900/30 rounded-lg flex-shrink-0",children:(0,a.jsx)(x.A,{className:"h-4 w-4 sm:h-5 sm:w-5 lg:h-6 lg:w-6 text-purple-600 dark:text-purple-400"})}),(0,a.jsxs)("div",{className:"ml-2 sm:ml-3 lg:ml-4 min-w-0 flex-1",children:[(0,a.jsx)("p",{className:"text-xs sm:text-sm font-medium text-gray-600 dark:text-gray-400 mb-1 truncate",children:"Pending Applications"}),(0,a.jsx)("p",{className:"text-lg sm:text-xl lg:text-2xl font-semibold text-gray-900 dark:text-white",children:t.pending})]})]})})]})};var A=r(1758),E=r(7205),P=r(9473),S=r(2963),C=r(6108),T=r(1600),z=r(710),I=r(9142),D=r(9083),F=r(6495),L=r(9628),U=r(2341),J=r(2089),R=r(9468);let O=e=>{let{applications:t,searchTerm:r,statusFilter:l,onSearchTermChange:i,onStatusFilterChange:o,onEditApplication:n,onViewJobDescription:d,onDeleteApplication:m,onUpdateApplicationStatus:u,onStartInterview:x,onLoadAIEnhanced:p}=e,[g,h]=(0,s.useState)(0),b=(0,s.useRef)(null),[y,f]=(0,s.useState)("card"),j=async e=>{try{let t=e.job_posting_url;t?("not_applied"===e.status&&u&&(console.log("ApplicationsTable: Updating status to applied for",e.id),u(e.id,"applied")),window.open(t,"_blank")):console.log("No application URL available")}catch(e){console.error("Error during quick apply:",e)}},v=t.filter(e=>{let t=(e.position||"").toLowerCase().includes(r.toLowerCase())||(e.company_name||"").toLowerCase().includes(r.toLowerCase()),a="all"===l||e.status===l;return t&&a}),k=e=>{switch(e){case"applied":return"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-400";case"interview":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-400";case"offer":return"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400";case"rejected":return"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400";default:return"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"}},N=e=>{if(!e)return"N/A";try{let t=new Date(e);if(isNaN(t.getTime()))return"Invalid date";return(0,R.GP)(t,"MMM d, yyyy")}catch(e){return"Invalid date"}};return(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm relative",children:[(0,a.jsx)("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[(0,a.jsxs)("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:["Your Applications (",v.length,")"]}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3 w-full sm:w-auto",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(c.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:16}),(0,a.jsx)("input",{type:"text",placeholder:"Search applications...",value:r,onChange:e=>i(e.target.value),className:"pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(A.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:16}),(0,a.jsxs)("select",{value:l,onChange:e=>o(e.target.value),className:"pl-10 pr-8 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent appearance-none",children:[(0,a.jsx)("option",{value:"all",children:"All Status"}),(0,a.jsx)("option",{value:"not_applied",children:"Not Applied"}),(0,a.jsx)("option",{value:"applied",children:"Applied"}),(0,a.jsx)("option",{value:"screening",children:"Screening"}),(0,a.jsx)("option",{value:"interview",children:"Interview"}),(0,a.jsx)("option",{value:"offer",children:"Offer"}),(0,a.jsx)("option",{value:"rejected",children:"Rejected"}),(0,a.jsx)("option",{value:"accepted",children:"Accepted"}),(0,a.jsx)("option",{value:"withdrawn",children:"Withdrawn"})]})]}),(0,a.jsx)("button",{onClick:()=>{f("card"===y?"table":"card")},className:"p-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-600 transition-colors",title:"card"===y?"Switch to table view":"Switch to card view",children:"card"===y?(0,a.jsx)(E.A,{size:16}):(0,a.jsx)(P.A,{size:16})})]})]})]})}),"card"===y&&(0,a.jsx)("div",{className:"relative mx-12",children:v.length>0?(0,a.jsxs)(a.Fragment,{children:[v.length>3&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("button",{onClick:()=>{if(b.current){let e=Math.max(0,g-1);h(e),b.current.scrollTo({left:320*e,behavior:"smooth"})}},disabled:0===g,className:"absolute -left-12 top-1/2 transform -translate-y-1/2 z-10 bg-white dark:bg-gray-700 shadow-lg rounded-full p-3 hover:shadow-xl transition-all disabled:opacity-50 disabled:cursor-not-allowed border border-gray-200 dark:border-gray-600",children:(0,a.jsx)(S.A,{size:24,className:"text-gray-600 dark:text-gray-300"})}),(0,a.jsx)("button",{onClick:()=>{if(b.current){let e=Math.min(Math.max(0,v.length-3),g+1);h(e),b.current.scrollTo({left:320*e,behavior:"smooth"})}},disabled:g>=Math.max(0,v.length-3),className:"absolute -right-12 top-1/2 transform -translate-y-1/2 z-10 bg-white dark:bg-gray-700 shadow-lg rounded-full p-3 hover:shadow-xl transition-all disabled:opacity-50 disabled:cursor-not-allowed border border-gray-200 dark:border-gray-600",children:(0,a.jsx)(C.A,{size:24,className:"text-gray-600 dark:text-gray-300"})})]}),(0,a.jsx)("div",{ref:b,className:"flex overflow-x-auto space-x-6 px-6 py-6 scrollbar-hide",style:{scrollbarWidth:"none",msOverflowStyle:"none"},children:v.map(e=>(0,a.jsxs)("div",{className:"flex-shrink-0 w-80 bg-white dark:bg-gray-700 rounded-xl shadow-lg transition-all duration-300 border border-gray-200 dark:border-gray-600 cursor-pointer",children:[(0,a.jsx)("div",{className:"p-6 border-b border-gray-200 dark:border-gray-600",children:(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-1",children:e.position}),(0,a.jsxs)("div",{className:"flex items-center text-gray-600 dark:text-gray-400 mb-3",children:[(0,a.jsx)(T.A,{size:16,className:"mr-2"}),(0,a.jsx)("span",{className:"text-sm",children:e.company_name})]})]}),(0,a.jsx)("span",{className:"inline-flex px-3 py-1 text-xs font-semibold rounded-full ".concat(k(e.status||"not_applied")),children:(e.status||"not_applied").replace("_"," ").toUpperCase()})]})}),(0,a.jsxs)("div",{className:"p-6 space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,a.jsxs)("div",{className:"flex items-center text-gray-600 dark:text-gray-400",children:[(0,a.jsx)(w.A,{size:14,className:"mr-2"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-xs font-medium",children:"Applied"}),(0,a.jsx)("div",{children:N(e.application_date)})]})]}),(0,a.jsxs)("div",{className:"flex items-center text-gray-600 dark:text-gray-400",children:[(0,a.jsx)(z.A,{size:14,className:"mr-2"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-xs font-medium",children:"Updated"}),(0,a.jsx)("div",{children:N(e.updated_at)})]})]})]}),e.job_description&&(0,a.jsx)("div",{children:(0,a.jsxs)("p",{className:"text-sm text-gray-600 dark:text-gray-400 line-clamp-3",children:[e.job_description.substring(0,120),"..."]})}),e.notes&&(0,a.jsx)("div",{children:(0,a.jsxs)("p",{className:"text-xs text-gray-500 dark:text-gray-500 italic",children:['"',e.notes.substring(0,60),'..."']})})]}),(0,a.jsx)("div",{className:"p-6 pt-0",children:(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex flex-col rounded-lg overflow-hidden",children:[e.job_posting_url&&"not_applied"===e.status&&(0,a.jsxs)("button",{onClick:()=>j(e),className:"w-full bg-gradient-to-r from-blue-500 to-indigo-600 hover:from-blue-600 hover:to-indigo-700 text-white px-4 py-2.5 text-sm font-medium transition-all flex items-center justify-center shadow-sm hover:shadow-md",children:[(0,a.jsx)(I.A,{size:14,className:"mr-2"}),"Apply Now"]}),e.job_posting_url&&"not_applied"!==e.status&&(0,a.jsxs)("button",{onClick:()=>window.open(e.job_posting_url||"","_blank"),className:"w-full bg-indigo-600 hover:bg-indigo-700 text-white px-4 py-2.5 text-sm font-medium transition-all flex items-center justify-center shadow-sm hover:shadow-md",children:[(0,a.jsx)(I.A,{size:14,className:"mr-2"}),"View Job"]}),e.job_description&&x&&(0,a.jsxs)("button",{onClick:()=>x(e),className:"w-full bg-gradient-to-r from-fuchsia-500 to-pink-500 hover:from-fuchsia-600 hover:to-pink-600 text-white px-4 py-2.5 text-sm font-medium transition-all flex items-center justify-center shadow-sm hover:shadow-md mt-2",children:[(0,a.jsx)(D.A,{size:14,className:"mr-2"}),"Practice Interview"]}),p&&(0,a.jsxs)("button",{onClick:()=>p(e),className:"w-full bg-gradient-to-r from-violet-500 to-purple-600 hover:from-violet-600 hover:to-purple-700 text-white px-4 py-2.5 text-sm font-medium transition-all flex items-center justify-center shadow-sm hover:shadow-md mt-2",children:[(0,a.jsx)(F.A,{size:14,className:"mr-2"}),"AI Resume & Cover Letter"]})]}),(0,a.jsxs)("div",{className:"flex justify-center space-x-2 pt-2",children:[(0,a.jsx)("button",{onClick:()=>n(e),className:"p-2 text-indigo-600 dark:text-indigo-400 hover:text-indigo-800 dark:hover:text-indigo-300 hover:bg-indigo-50 dark:hover:bg-indigo-900/20 rounded-lg transition-colors",title:"Edit Application",children:(0,a.jsx)(L.A,{size:16})}),e.job_description&&(0,a.jsx)("button",{onClick:()=>d({title:e.position,company:e.company_name,description:e.job_description||""}),className:"p-2 text-emerald-600 dark:text-emerald-400 hover:text-emerald-800 dark:hover:text-emerald-300 hover:bg-emerald-50 dark:hover:bg-emerald-900/20 rounded-lg transition-colors",title:"View Job Description",children:(0,a.jsx)(U.A,{size:16})}),(0,a.jsx)("button",{onClick:()=>m(e.id),className:"p-2 text-rose-600 dark:text-rose-400 hover:text-rose-800 dark:hover:text-rose-300 hover:bg-rose-50 dark:hover:bg-rose-900/20 rounded-lg transition-colors",title:"Delete Application",children:(0,a.jsx)(J.A,{size:16})})]})]})})]},e.id))}),v.length>3&&(0,a.jsx)("div",{className:"flex justify-center space-x-2 pb-6",children:Array.from({length:Math.ceil(v.length/3)}).map((e,t)=>(0,a.jsx)("button",{onClick:()=>{h(t),b.current&&b.current.scrollTo({left:320*t,behavior:"smooth"})},className:"w-3 h-3 rounded-full transition-colors ".concat(Math.floor(g/3)===t?"bg-blue-600":"bg-gray-300 dark:bg-gray-600")},t))})]}):(0,a.jsx)("div",{className:"text-center py-12",children:(0,a.jsx)("div",{className:"text-gray-500 dark:text-gray-400",children:r||"all"!==l?"No applications match your filters.":"No applications yet. Add your first application!"})})}),"table"===y&&(0,a.jsx)("div",{className:"overflow-x-auto",children:v.length>0?(0,a.jsxs)("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[(0,a.jsx)("thead",{className:"bg-gradient-to-r from-blue-600 to-purple-600 text-white",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-6 py-4 text-left text-sm font-bold uppercase tracking-wider",children:"Company"}),(0,a.jsx)("th",{className:"px-6 py-4 text-left text-sm font-bold uppercase tracking-wider",children:"Position"}),(0,a.jsx)("th",{className:"px-6 py-4 text-left text-sm font-bold uppercase tracking-wider",children:"Status"}),(0,a.jsx)("th",{className:"px-6 py-4 text-left text-sm font-bold uppercase tracking-wider",children:"Applied Date"}),(0,a.jsx)("th",{className:"px-6 py-4 text-left text-sm font-bold uppercase tracking-wider",children:"Last Updated"}),(0,a.jsx)("th",{className:"px-6 py-4 text-left text-sm font-bold uppercase tracking-wider",children:"Actions"})]})}),(0,a.jsx)("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:v.map((e,t)=>(0,a.jsxs)("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors ".concat(t%2==0?"bg-white dark:bg-gray-800":"bg-gray-50 dark:bg-gray-750"),children:[(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:e.company_name}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:e.position}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsx)("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full ".concat(k(e.status||"not_applied")),children:(e.status||"not_applied").replace("_"," ").toUpperCase()})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:N(e.application_date)}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:N(e.updated_at)}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsx)("button",{onClick:()=>n(e),className:"text-indigo-600 dark:text-indigo-400 hover:text-indigo-800 dark:hover:text-indigo-300 p-1 rounded hover:bg-indigo-50 dark:hover:bg-indigo-900/20 transition-colors",title:"Edit application",children:(0,a.jsx)(L.A,{size:16})}),e.job_description&&(0,a.jsx)("button",{onClick:()=>d({title:e.position,company:e.company_name,description:e.job_description||""}),className:"text-emerald-600 dark:text-emerald-400 hover:text-emerald-800 dark:hover:text-emerald-300 p-1 rounded hover:bg-emerald-50 dark:hover:bg-emerald-900/20 transition-colors",title:"View job description",children:(0,a.jsx)(U.A,{size:16})}),x&&e.job_description&&(0,a.jsx)("button",{onClick:()=>x(e),className:"text-fuchsia-600 dark:text-fuchsia-400 hover:text-fuchsia-800 dark:hover:text-fuchsia-300 p-1 rounded hover:bg-fuchsia-50 dark:hover:bg-fuchsia-900/20 transition-colors",title:"Practice interview",children:(0,a.jsx)(D.A,{size:16})}),p&&(0,a.jsx)("button",{onClick:()=>p(e),className:"text-violet-600 dark:text-violet-400 hover:text-violet-800 dark:hover:text-violet-300 p-1 rounded hover:bg-violet-50 dark:hover:bg-violet-900/20 transition-colors",title:"AI Resume & Cover Letter",children:(0,a.jsx)(F.A,{size:16})}),(0,a.jsx)("button",{onClick:()=>m(e.id),className:"text-rose-600 dark:text-rose-400 hover:text-rose-800 dark:hover:text-rose-300 p-1 rounded hover:bg-rose-50 dark:hover:bg-rose-900/20 transition-colors",title:"Delete application",children:(0,a.jsx)(J.A,{size:16})})]})})]},e.id))})]}):(0,a.jsx)("div",{className:"text-center py-12",children:(0,a.jsx)("div",{className:"text-gray-500 dark:text-gray-400",children:r||"all"!==l?"No applications match your filters.":"No applications yet. Add your first application!"})})})]})},M=e=>{let{isOpen:t,jobDescription:r,onClose:s}=e;return t&&r?(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg max-w-4xl w-full max-h-[80vh] overflow-hidden",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:r.title}),(0,a.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:r.company})]}),(0,a.jsx)("button",{onClick:s,className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 transition-colors",children:(0,a.jsx)(b.A,{size:24})})]}),(0,a.jsx)("div",{className:"p-6 overflow-y-auto max-h-[60vh]",children:(0,a.jsx)("div",{className:"text-gray-700 dark:text-gray-300 whitespace-pre-wrap",dangerouslySetInnerHTML:{__html:r.description.replace(/\n/g,"<br>")}})})]})}):null};var Y=r(4642),q=r(1384),B=r(9652),H=r(4564),V=r(2520),W=r(2873),G=r(6257),K=r(5272),X=r(3003),$=r(9710);let Q=$.vv.create({page:{flexDirection:"column",backgroundColor:"#FFFFFF",padding:30},section:{marginBottom:10},header:{fontSize:24,marginBottom:10,textAlign:"center"},subHeader:{fontSize:18,marginBottom:5},text:{fontSize:12,marginBottom:3}}),Z=e=>{let{profile:t,resumeHtml:r}=e;return(0,a.jsx)($.yo,{children:(0,a.jsxs)($.YW,{size:"A4",style:Q.page,children:[(0,a.jsxs)($.Ss,{style:Q.section,children:[(0,a.jsx)($.EY,{style:Q.header,children:t.fullName}),(0,a.jsx)($.EY,{style:Q.text,children:t.email}),t.phone&&(0,a.jsx)($.EY,{style:Q.text,children:t.phone}),t.location&&(0,a.jsx)($.EY,{style:Q.text,children:t.location}),(0,a.jsxs)($.Ss,{style:{flexDirection:"row",justifyContent:"space-around",marginTop:5},children:[t.linkedin&&(0,a.jsxs)($.EY,{style:Q.text,children:["LinkedIn: ",t.linkedin]}),t.github&&(0,a.jsxs)($.EY,{style:Q.text,children:["GitHub: ",t.github]}),t.portfolio&&(0,a.jsxs)($.EY,{style:Q.text,children:["Portfolio: ",t.portfolio]})]})]}),(0,a.jsxs)($.Ss,{style:Q.section,children:[(0,a.jsx)($.EY,{style:Q.subHeader,children:"Optimized Content"}),(0,a.jsx)($.EY,{style:Q.text,children:r.replace(/<[^>]*>?/gm,"")})]})]})})};var ee=r(9320),et=r(2964);class er{static async create(e,t){if(!e||"string"!=typeof e)throw Error('[Firestore] Invalid collection path: "'.concat(e,'"'));let r=(0,et.rJ)(ee.db,e);return(await (0,et.gS)(r,t)).id}static async read(e){if(!e||"string"!=typeof e)throw Error('[Firestore] Invalid document path: "'.concat(e,'"'));if(e.split("/").length%2!=0)throw Error('[Firestore] Document path must have an even number of segments: "'.concat(e,'"'));let t=(0,et.H9)(ee.db,e),r=await (0,et.x7)(t);return r.exists()?r.data():null}static async update(e,t){if(!e||"string"!=typeof e)throw Error('[Firestore] Invalid document path: "'.concat(e,'"'));if(e.split("/").length%2!=0)throw Error('[Firestore] Document path must have an even number of segments: "'.concat(e,'"'));let r=(0,et.H9)(ee.db,e);await (0,et.mZ)(r,t)}static async set(e,t){if(!e||"string"!=typeof e)throw Error('[Firestore] Invalid document path: "'.concat(e,'"'));if(e.split("/").length%2!=0)throw Error('[Firestore] Document path must have an even number of segments: "'.concat(e,'"'));let r=(0,et.H9)(ee.db,e);await (0,et.BN)(r,t)}static async delete(e){if(!e||"string"!=typeof e)throw Error('[Firestore] Invalid document path: "'.concat(e,'"'));if(e.split("/").length%2!=0)throw Error('[Firestore] Document path must have an even number of segments: "'.concat(e,'"'));let t=(0,et.H9)(ee.db,e);await (0,et.kd)(t)}static async getList(e){if(!e||"string"!=typeof e)throw Error('[Firestore] Invalid collection path: "'.concat(e,'"'));let t=(0,et.rJ)(ee.db,e);return(await (0,et.GG)(t)).docs.map(e=>({...e.data(),id:e.id}))}}class ea{static basePath(e){return"users/".concat(e,"/profile/main")}static async getUserProfile(e){return er.read(this.basePath(e))}static async updateUserProfile(e,t){return er.update(this.basePath(e),t)}static async getOrCreateProfile(e,t,r){let a=await this.getUserProfile(e);return a||(a={email:t,fullName:r||"",subscription_status:"free"},await er.set(this.basePath(e),a)),a}}var es=r(7069);let el=e=>{let{results:t,jobDetails:r,onBack:l}=e,{user:i}=(0,es.A)(),[o,n]=(0,s.useState)(null),[d,c]=(0,s.useState)(!0);return((0,s.useEffect)(()=>{(async()=>{i&&n(await ea.getUserProfile(i.uid)),c(!1)})()},[i]),d)?(0,a.jsx)("div",{children:"Loading..."}):(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsx)("button",{onClick:l,className:"mb-4 text-blue-500",children:"Back to Form"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"Optimized Resume"}),(0,a.jsx)("div",{dangerouslySetInnerHTML:{__html:t.resume_html}}),o&&(0,a.jsx)($.XP,{document:(0,a.jsx)(Z,{profile:o,resumeHtml:t.resume_html}),fileName:"optimized_resume.pdf",className:"mt-4 inline-block bg-blue-500 text-white px-4 py-2 rounded",children:e=>{let{blob:t,url:r,loading:a,error:s}=e;return a?"Loading document...":"Download Resume"}})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"Optimized Cover Letter"}),(0,a.jsx)("div",{dangerouslySetInnerHTML:{__html:t.cover_letter_html}}),o&&(0,a.jsx)($.XP,{document:(0,a.jsx)(Z,{profile:o,resumeHtml:t.cover_letter_html}),fileName:"optimized_cover_letter.pdf",className:"mt-4 inline-block bg-blue-500 text-white px-4 py-2 rounded",children:e=>{let{blob:t,url:r,loading:a,error:s}=e;return a?"Loading document...":"Download Cover Letter"}})]})]})]})};class ei{static async extractResumeJson(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{if(!this.API_KEY)throw Error("OpenAI API key is not configured. Please set NEXT_PUBLIC_OPENAI_API_KEY in your environment variables.");let r=new FormData;r.append("file",e),r.append("api_key",this.API_KEY),r.append("model_type",t.modelType||this.DEFAULT_MODEL_TYPE),r.append("model",t.model||this.DEFAULT_MODEL),r.append("file_id",t.fileId||"req_".concat(Date.now()));let a=await fetch("".concat(this.API_BASE_URL,"/api/extract-resume-json"),{method:"POST",body:r,headers:{"ngrok-skip-browser-warning":"true"},signal:AbortSignal.timeout(6e5)});if(!a.ok){let e=await a.json().catch(()=>({}));throw Error(e.message||"HTTP error! status: ".concat(a.status))}return await a.json()}catch(e){if(console.error("Error extracting resume JSON:",e),"AbortError"===e.name)throw Error("Request timed out. The AI processing is taking longer than expected. Please try again.");if(e.message.includes("Failed to fetch"))throw Error("Unable to connect to the resume extraction service. Please check your internet connection and try again.");throw Error(e.message||"Failed to extract resume data")}}static validateResumeFile(e){return["application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","text/plain"].includes(e.type)?e.size>0xa00000?{isValid:!1,error:"File size must be less than 10MB"}:0===e.size?{isValid:!1,error:"File appears to be empty"}:{isValid:!0}:{isValid:!1,error:"Only PDF, Word documents, and text files are supported"}}static getConfiguration(){return{apiBaseUrl:this.API_BASE_URL,hasApiKey:!!this.API_KEY,defaultModelType:this.DEFAULT_MODEL_TYPE,defaultModel:this.DEFAULT_MODEL}}static parseResumeData(e){try{let t=e;return"string"==typeof e&&(t=JSON.parse(e)),{personal:{name:t.name||t.full_name||"",email:t.email||"",phone:t.phone||t.phone_number||"",location:t.location||t.address||"",linkedin:t.linkedin||t.linkedin_url||"",website:t.website||t.portfolio||""},education:Array.isArray(t.education)?t.education.map(e=>({school:e.school||e.institution||e.university||"",degree:e.degree||e.degree_type||"",field:e.field||e.major||e.field_of_study||"",gpa:e.gpa||"",start_date:e.start_date||e.from||"",end_date:e.end_date||e.to||"",location:e.location||""})):[],experience:Array.isArray(t.experience)?t.experience.map(e=>({company:e.company||e.employer||"",position:e.position||e.title||e.job_title||"",start_date:e.start_date||e.from||"",end_date:e.end_date||e.to||"",location:e.location||"",highlights:Array.isArray(e.highlights)?e.highlights:Array.isArray(e.responsibilities)?e.responsibilities:"string"==typeof e.description?[e.description]:[]})):[],skills:Array.isArray(t.skills)?t.skills:"string"==typeof t.skills?t.skills.split(",").map(e=>e.trim()):[],projects:Array.isArray(t.projects)?t.projects.map(e=>({title:e.title||e.name||"",url:e.url||e.link||"",description:e.description||"",technologies:Array.isArray(e.technologies)?e.technologies.join(", "):"string"==typeof e.technologies?e.technologies:""})):[],certifications:Array.isArray(t.certifications)?t.certifications.map(e=>({name:e.name||e.title||"",issuing_organization:e.issuing_organization||e.issuer||"",issue_date:e.issue_date||e.date||"",expiration_date:e.expiration_date||e.expires||""})):[],awards:Array.isArray(t.awards)?t.awards.map(e=>({title:e.title||e.name||"",issuer:e.issuer||e.organization||"",date_received:e.date_received||e.date||"",description:e.description||""})):[],languages:Array.isArray(t.languages)?t.languages.map(e=>({name:"string"==typeof e?e:e.name||e.language||"",proficiency:"object"==typeof e&&(e.proficiency||e.level)||""})):[]}}catch(e){return console.error("Error parsing resume data:",e),null}}}ei.API_BASE_URL="https://myjobsearchagent-backend.onrender.com",ei.API_KEY="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",ei.DEFAULT_MODEL_TYPE="OpenAI",ei.DEFAULT_MODEL="gpt-4o";class eo{static async enhanceWithFile(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};try{var a;let s=new FormData;s.append("file",e),s.append("job_description",t),s.append("model_type",r.modelType||this.DEFAULT_MODEL_TYPE),s.append("model",r.model||this.DEFAULT_MODEL),s.append("file_id",r.fileId||"enhance_".concat(Date.now())),console.log("Making AI enhancement request with file to:",this.API_BASE_URL);let l=await fetch(this.API_BASE_URL,{method:"POST",body:s,signal:AbortSignal.timeout(12e4)});if(!l.ok){let e=await l.json().catch(()=>({}));throw Error(e.message||"HTTP error! status: ".concat(l.status))}let i=await l.json();return console.log("AI enhancement successful:",{success:i.success,matchScore:null==(a=i.analysis)?void 0:a.match_score,hasEnhancements:!!i.enhancements}),i}catch(e){if(console.error("Error in AI enhancement with file:",e),"AbortError"===e.name)throw Error("AI enhancement timed out. The analysis is taking longer than expected. Please try again.");if(e.message.includes("Failed to fetch"))throw Error("Unable to connect to the AI enhancement service. Please check your internet connection and try again.");throw Error(e.message||"Failed to enhance resume with AI")}}static async enhanceWithJson(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};try{var a;let s={resume_json:e,job_description:t,model_type:r.modelType||this.DEFAULT_MODEL_TYPE,model:r.model||this.DEFAULT_MODEL,file_id:r.fileId||"enhance_".concat(Date.now())};console.log("Making AI enhancement request with JSON to:",this.API_BASE_URL);let l=await fetch(this.API_BASE_URL,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s),signal:AbortSignal.timeout(12e4)});if(!l.ok){let e=await l.json().catch(()=>({}));throw Error(e.message||"HTTP error! status: ".concat(l.status))}let i=await l.json();return console.log("AI enhancement successful:",{success:i.success,matchScore:null==(a=i.analysis)?void 0:a.match_score,hasEnhancements:!!i.enhancements}),i}catch(e){if(console.error("Error in AI enhancement with JSON:",e),"AbortError"===e.name)throw Error("AI enhancement timed out. The analysis is taking longer than expected. Please try again.");if(e.message.includes("Failed to fetch"))throw Error("Unable to connect to the AI enhancement service. Please check your internet connection and try again.");throw Error(e.message||"Failed to enhance resume with AI")}}static getConfiguration(){return{apiBaseUrl:this.API_BASE_URL,hasApiKey:!!this.API_KEY,defaultModelType:this.DEFAULT_MODEL_TYPE,defaultModel:this.DEFAULT_MODEL}}static validateEnhancementRequest(e,t){return e&&0!==e.trim().length?e.trim().length<50?{isValid:!1,error:"Job description is too short. Please provide a more detailed job description (at least 50 characters)."}:t&&"object"!=typeof t?{isValid:!1,error:"Resume data must be a valid object"}:{isValid:!0}:{isValid:!1,error:"Job description is required for AI enhancement"}}static normalizeEnhancementResponse(e){try{var t,r,a,s,l,i,o,n,d,c,m,u,x,p,g,h,b,y,f,j,v,k,w,N,_,A,E,P,S;return{success:e.success||!1,analysis:{match_score:(null==(t=e.analysis)?void 0:t.match_score)||0,strengths:Array.isArray(null==(r=e.analysis)?void 0:r.strengths)?e.analysis.strengths:[],gaps:Array.isArray(null==(a=e.analysis)?void 0:a.gaps)?e.analysis.gaps:[],suggestions:Array.isArray(null==(s=e.analysis)?void 0:s.suggestions)?e.analysis.suggestions:[],keyword_analysis:{missing_keywords:Array.isArray(null==(i=e.analysis)||null==(l=i.keyword_analysis)?void 0:l.missing_keywords)?e.analysis.keyword_analysis.missing_keywords:[],present_keywords:Array.isArray(null==(n=e.analysis)||null==(o=n.keyword_analysis)?void 0:o.present_keywords)?e.analysis.keyword_analysis.present_keywords:[],keyword_density_score:(null==(c=e.analysis)||null==(d=c.keyword_analysis)?void 0:d.keyword_density_score)||0},section_recommendations:{skills:(null==(u=e.analysis)||null==(m=u.section_recommendations)?void 0:m.skills)||"",experience:(null==(p=e.analysis)||null==(x=p.section_recommendations)?void 0:x.experience)||"",education:(null==(h=e.analysis)||null==(g=h.section_recommendations)?void 0:g.education)||""}},enhancements:{enhanced_summary:(null==(b=e.enhancements)?void 0:b.enhanced_summary)||"",enhanced_skills:Array.isArray(null==(y=e.enhancements)?void 0:y.enhanced_skills)?e.enhancements.enhanced_skills:[],enhanced_experience_bullets:Array.isArray(null==(f=e.enhancements)?void 0:f.enhanced_experience_bullets)?e.enhancements.enhanced_experience_bullets:[],cover_letter_outline:{opening:(null==(v=e.enhancements)||null==(j=v.cover_letter_outline)?void 0:j.opening)||"",body:(null==(w=e.enhancements)||null==(k=w.cover_letter_outline)?void 0:k.body)||"",closing:(null==(_=e.enhancements)||null==(N=_.cover_letter_outline)?void 0:N.closing)||""}},metadata:{model_used:(null==(A=e.metadata)?void 0:A.model_used)||"gpt-4o",model_type:(null==(E=e.metadata)?void 0:E.model_type)||"OpenAI",timestamp:(null==(P=e.metadata)?void 0:P.timestamp)||new Date().toISOString(),resume_sections_analyzed:Array.isArray(null==(S=e.metadata)?void 0:S.resume_sections_analyzed)?e.metadata.resume_sections_analyzed:[]},file_id:e.file_id||"enhance_".concat(Date.now()),error:e.error,message:e.message}}catch(e){throw console.error("Error normalizing enhancement response:",e),Error("Failed to process AI enhancement response")}}}eo.API_BASE_URL="/api/ai/enhance",eo.DEFAULT_MODEL_TYPE="myjobsearchagent",eo.DEFAULT_MODEL="jsearch.p.rapidapi.com",eo.API_KEY="dfa377a0fbmsh8df80548e982bc2p1300b3jsnd59691bcf380";let en=e=>{let{jobDescription:t,applicationData:r={position:"",company_name:""},detailedUserProfile:l,onSave:n,onClose:d}=e,c=i(),{selectedFileMeta:m,selectedFileContent:u,cloudProvider:x,cloudFileUrl:p,error:g,showResults:h,optimizationResults:y,jobDescription:f}=o(e=>e.aiEnhancementModal),[j,v]=s.useState(!1),[w,N]=s.useState(""),[_]=s.useState("xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){let t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)})),{user:A}=(0,es.A)(),E=ei.getConfiguration();(0,s.useEffect)(()=>{t&&t!==f&&c({type:"aiEnhancementModal/openModal",payload:{jobDescription:t}})},[t]);let P=async e=>{try{let t=await fetch(e);if(!t.ok)throw Error("Failed to download file: ".concat(t.status));let r=await t.blob(),a=e.split("/").pop()||"resume.pdf";return new File([r],a,{type:r.type})}catch(e){throw Error("Failed to download file from URL. Please check the URL and permissions.")}},S=async()=>{if(!m&&!p)return void c((0,q.Nh)("Please select a resume file or provide a cloud file URL"));if(!t.trim())return void c((0,q.Nh)("Job description is required for AI enhancement"));if(!E.hasApiKey)return void c((0,q.Nh)("OpenAI API key is not configured. Please set VITE_OPENAI_API_KEY in your environment variables."));let e=eo.validateEnhancementRequest(t);if(!e.isValid)return void c((0,q.Nh)(e.error||"Invalid request"));v(!0),c((0,q.Nh)("")),N("");try{var a,s,i,o,n,d,x,g,h;let e,b=null;if(m&&u){let e=u.split(","),t=e[0].match(/:(.*?);/),r=t?t[1]:"application/octet-stream",a=e[1]?atob(e[1]):"",s=a.length,l=new Uint8Array(s);for(;s--;)l[s]=a.charCodeAt(s);b=new File([l],m.name,{type:r})}if(p&&!b&&(N("Downloading file from cloud storage..."),b=await P(p)),!b)throw Error("No file to process");N("Extracting resume data using AI...");let y=await ei.extractResumeJson(b,{modelType:E.defaultModelType,model:E.defaultModel,fileId:_});if(!y.success){if((null==(i=y.error)?void 0:i.includes("PDF format not supported"))||(null==(o=y.error)?void 0:o.includes("format not supported"))||(null==(n=y.error)?void 0:n.includes("unsupported file type")))throw Error("PDF format not supported by the current API. Please try uploading a Word document (.docx) or text file (.txt) instead.");if((null==(d=y.error)?void 0:d.includes("API key"))||(null==(x=y.error)?void 0:x.includes("authentication")))throw Error("API authentication failed. Please check your OpenAI API key configuration.");if((null==(g=y.error)?void 0:g.includes("rate limit"))||(null==(h=y.error)?void 0:h.includes("quota")))throw Error("API rate limit exceeded. Please try again in a few minutes.");throw Error(y.error||"Failed to extract resume data. The API may be temporarily unavailable.")}N("Processing extracted data...");let f=ei.parseResumeData(y.resume_json);if(!f)throw Error("Failed to parse extracted resume data. The resume format may not be compatible.");N("Analyzing resume against job description...");try{e=await eo.enhanceWithJson(y.resume_json,t,{modelType:E.defaultModelType,model:E.defaultModel,fileId:_})}catch(r){N("Retrying analysis with file upload..."),e=await eo.enhanceWithFile(b,t,{modelType:E.defaultModelType,model:E.defaultModel,fileId:_})}if(!e.success)throw Error(e.error||"Failed to analyze resume. Please try again.");let j=eo.normalizeEnhancementResponse(e);N("Generating optimization recommendations...");let v=Date.now(),k="https://example.com/ai-enhanced-resume-".concat(_,".pdf"),w="https://example.com/ai-enhanced-cover-letter-".concat(_,".pdf"),S={matchScore:j.analysis.match_score,summary:j.analysis.match_score>=80?"Excellent match! Your resume shows strong alignment with this position (".concat(j.analysis.match_score,"% match). The AI has identified key strengths and provided targeted recommendations for optimization."):j.analysis.match_score>=70?"Good match! Your resume aligns well with this position (".concat(j.analysis.match_score,"% match). The AI has identified areas for improvement to strengthen your application."):"Moderate match (".concat(j.analysis.match_score,"% match). The AI has identified significant opportunities to better align your resume with this position."),strengths:j.analysis.strengths.length>0?j.analysis.strengths:["Strong technical background with ".concat((null==(a=f.experience)?void 0:a.length)||0," work experience entries"),"Comprehensive skill set including relevant technologies","Educational background aligns with job requirements"],gaps:j.analysis.gaps.length>0?j.analysis.gaps:["Some industry-specific keywords could be emphasized more prominently","Consider adding more quantified achievements with specific metrics"],suggestions:j.analysis.suggestions.length>0?j.analysis.suggestions:["Incorporate more action verbs and industry-specific terminology","Add specific metrics and percentages to quantify your achievements","Consider reorganizing sections to highlight most relevant experience first"],optimizedResumeUrl:k,optimizedCoverLetterUrl:w,keywordAnalysis:{coverageScore:j.analysis.keyword_analysis.keyword_density_score,coveredKeywords:j.analysis.keyword_analysis.present_keywords,missingKeywords:j.analysis.keyword_analysis.missing_keywords},experienceOptimization:(null==(s=f.experience)?void 0:s.map((e,t)=>({company:e.company||"Unknown Company",position:e.position||"Unknown Position",relevanceScore:Math.max(70,j.analysis.match_score-5*t),included:t<3,reasoning:t>=3?"Less relevant to target position based on AI analysis":void 0})))||[],skillsOptimization:{technicalSkills:j.enhancements.enhanced_skills.length>0?j.enhancements.enhanced_skills:Array.isArray(f.skills)?f.skills.slice(0,8):[],softSkills:["Leadership","Problem Solving","Communication","Team Collaboration"],missingSkills:j.analysis.keyword_analysis.missing_keywords.slice(0,5)},parsedResume:f,extractionMetadata:{documentId:_,extractedTextLength:y.extracted_text_length,processingTime:Date.now()-v,modelUsed:j.metadata.model_used,apiBaseUrl:E.apiBaseUrl,sectionsAnalyzed:j.metadata.resume_sections_analyzed},aiEnhancements:{enhancedSummary:j.enhancements.enhanced_summary,enhancedExperienceBullets:j.enhancements.enhanced_experience_bullets,coverLetterOutline:j.enhancements.cover_letter_outline,sectionRecommendations:j.analysis.section_recommendations},rawAIResponse:j,jobDescription:t,applicationData:r,detailedUserProfile:l,user:A};c((0,q.UF)(S)),c((0,q.qI)(!0))}catch(t){let e=t.message;t.message.includes("HTTP error! status: 500")||t.message.includes("status: 500")?e="The AI service is experiencing temporary issues on the server side. This is usually resolved quickly. Please try again in a few moments, or contact support if the problem persists.":t.message.includes("Failed to fetch")||t.message.includes("network")?e="Unable to connect to the AI service. Please check your internet connection and try again.":t.message.includes("timeout")||t.message.includes("timed out")?e="The AI processing is taking longer than expected. Please try again with a smaller file or try again later.":t.message.includes("API key")?e="API configuration error. Please contact support for assistance.":t.message&&"Failed to generate AI-enhanced documents. Please try again."!==t.message||(e="The AI service is temporarily unavailable. Please try again in a few minutes or contact support if the issue persists."),c((0,q.Nh)(e))}finally{v(!1),N("")}};if(h&&y){let e="\n      <p>".concat(y.aiEnhancements.coverLetterOutline.opening,"</p>\n      <p>").concat(y.aiEnhancements.coverLetterOutline.body,"</p>\n      <p>").concat(y.aiEnhancements.coverLetterOutline.closing,"</p>\n    ");return(0,a.jsx)(el,{results:{resume_html:y.aiEnhancements.enhancedSummary,cover_letter_html:e},jobDetails:{title:r.position,company:r.company_name,description:t},onBack:()=>{c((0,q.qI)(!1)),y&&n(y.optimizedResumeUrl,y.optimizedCoverLetterUrl),d()}})}return(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,a.jsxs)("div",{className:"relative bg-white dark:bg-gray-800 rounded-lg max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[j&&(0,a.jsxs)("div",{className:"absolute inset-0 z-50 flex flex-col items-center justify-center bg-white/80 dark:bg-gray-900/80 backdrop-blur-sm transition-all rounded-lg animate-fade-in",children:[(0,a.jsxs)("div",{className:"flex flex-col items-center gap-6",children:[(0,a.jsxs)("div",{className:"relative flex items-center justify-center",children:[(0,a.jsx)("span",{className:"absolute inline-flex h-16 w-16 rounded-full bg-blue-400 opacity-40 animate-ping"}),(0,a.jsx)("span",{className:"inline-flex items-center justify-center h-16 w-16 rounded-full bg-gradient-to-r from-blue-600 to-purple-600 shadow-lg animate-bounce-slow",children:(0,a.jsx)(V.A,{className:"text-white animate-spin-slow",size:36})})]}),(0,a.jsx)("div",{className:"w-64 h-3 bg-blue-100 dark:bg-blue-900 rounded-full overflow-hidden shadow-inner",children:(0,a.jsx)("div",{className:"h-full bg-gradient-to-r from-blue-500 via-purple-500 to-pink-500 animate-progress-bar"})}),(0,a.jsx)("span",{className:"text-lg font-semibold text-blue-700 dark:text-blue-300 animate-fade-in-text",children:w||"Generating your AI-enhanced resume & cover letter..."})]}),(0,a.jsx)("style",{children:"\n              @keyframes bounce-slow {\n                0%, 100% { transform: translateY(0); }\n                50% { transform: translateY(-12px); }\n              }\n              .animate-bounce-slow {\n                animation: bounce-slow 2s infinite;\n              }\n              @keyframes spin-slow {\n                100% { transform: rotate(360deg); }\n              }\n              .animate-spin-slow {\n                animation: spin-slow 3s linear infinite;\n              }\n              @keyframes progress-bar {\n                0% { width: 0%; }\n                80% { width: 90%; }\n                100% { width: 100%; }\n              }\n              .animate-progress-bar {\n                animation: progress-bar 2.5s cubic-bezier(0.4,0,0.2,1) infinite;\n              }\n              @keyframes fade-in {\n                from { opacity: 0; }\n                to { opacity: 1; }\n              }\n              .animate-fade-in {\n                animation: fade-in 0.7s ease-in;\n              }\n              @keyframes fade-in-text {\n                from { opacity: 0; transform: translateY(10px); }\n                to { opacity: 1; transform: translateY(0); }\n              }\n              .animate-fade-in-text {\n                animation: fade-in-text 1.2s ease-in;\n              }\n            "})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-10 h-10 bg-gradient-to-r from-blue-600 to-purple-600 rounded-lg flex items-center justify-center",children:(0,a.jsx)(V.A,{className:"text-white",size:20})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"AI Enhanced Resume & Cover Letter Generator"}),(0,a.jsxs)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Document ID: ",_.slice(0,8),"...",r&&(0,a.jsxs)("span",{className:"ml-2",children:[" ",r.position," at ",r.company_name]})]})]})]}),(0,a.jsx)("button",{onClick:d,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:(0,a.jsx)(b.A,{size:24})})]}),(0,a.jsxs)("div",{className:"p-6 space-y-6",children:[g&&(0,a.jsxs)("div",{className:"bg-red-50 dark:bg-red-900/30 text-red-600 dark:text-red-400 p-4 rounded-lg text-sm flex items-start gap-3",children:[(0,a.jsx)(W.A,{size:16,className:"mt-0.5 flex-shrink-0"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium",children:"Error"}),(0,a.jsx)("p",{children:g})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[(0,a.jsx)(k.A,{size:16,className:"inline mr-2"}),"Job Description"]}),(0,a.jsx)("textarea",{value:t||f||"",readOnly:!0,rows:6,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-white resize-none",placeholder:"Job description will be used to tailor your resume and cover letter..."}),(0,a.jsx)("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"This job description will be analyzed by AI to optimize your resume and cover letter"})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-4",children:[(0,a.jsx)(G.A,{size:16,className:"inline mr-2"}),"Upload Your Current Resume"]}),(0,a.jsx)("div",{className:"border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg p-6 mb-4",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(K.A,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),(0,a.jsxs)("div",{className:"flex flex-col items-center",children:[(0,a.jsxs)("label",{className:"cursor-pointer",children:[(0,a.jsx)("span",{className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg font-medium transition-colors",children:"Browse Local Files"}),(0,a.jsx)("input",{type:"file",className:"hidden",accept:".pdf,.txt",onChange:e=>{var t;let r=null==(t=e.target.files)?void 0:t[0];if(r){let e=ei.validateResumeFile(r);if(!e.isValid)return void c((0,q.Nh)(e.error||"Invalid file"));let t=new FileReader;t.onload=()=>{let e=t.result;c((0,q.ig)({meta:{name:r.name,type:r.type,size:r.size,lastModified:r.lastModified},content:e})),c((0,q.Nh)("")),c((0,q.hH)(""))},t.onerror=()=>{c((0,q.Nh)("Failed to read file. Please try again."))},t.readAsDataURL(r)}}},m?m.name+m.lastModified:"empty")]}),(0,a.jsx)("p",{className:"mt-2 text-sm text-gray-500 dark:text-gray-400",children:"Only PDF or Text files (max 10MB)"}),m&&(0,a.jsxs)("div",{className:"mt-3 p-2 bg-green-50 dark:bg-green-900/30 rounded-lg flex items-center gap-2",children:[(0,a.jsx)(X.A,{size:16,className:"text-green-600 dark:text-green-400"}),(0,a.jsxs)("p",{className:"text-sm text-green-700 dark:text-green-400",children:["Selected: ",m.name]})]})]})]})})]}),(0,a.jsxs)("div",{className:"flex gap-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:[(0,a.jsx)("button",{type:"button",onClick:S,disabled:j||!m&&!p||!(t||f||"").trim()||!E.hasApiKey,className:"flex-1 bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 disabled:from-gray-400 disabled:to-gray-500 text-white py-3 px-6 rounded-lg font-medium flex items-center justify-center gap-2 transition-all disabled:cursor-not-allowed",children:j?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),w||"Processing..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(V.A,{size:20}),"Generate using AI - Resume & Cover Letter"]})}),(0,a.jsx)("button",{type:"button",onClick:d,className:"px-6 py-3 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg font-medium hover:bg-gray-200 dark:hover:bg-gray-600 transition-all",children:"Cancel"})]})]})]})})},ed={NOT_APPLIED:"not_applied",APPLIED:"applied",INTERVIEWING:"interviewing",OFFERED:"offered",REJECTED:"rejected",ACCEPTED:"accepted",DECLINED:"declined"},ec=e=>{let{application:t,detailedUserProfile:r,onSave:l,onClose:n}=e,d=i(),c=o(e=>e.applicationModal.formData),[m,u]=(0,s.useState)(""),[p,g]=(0,s.useState)(!1);return(0,s.useEffect)(()=>{t?d((0,Y.po)({company_name:t.company_name||"",position:t.position||"",status:t.status||"not_applied",application_date:t.application_date?new Date(t.application_date).toISOString().split("T")[0]:new Date().toISOString().split("T")[0],location:t.location||"",job_posting_url:t.job_posting_url||"",job_description:t.job_description||"",notes:t.notes||"",resume_url:t.resume_url||"",cover_letter_url:t.cover_letter_url||""})):d((0,Y.E2)())},[t,d]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:t?"Edit Application":"Add New Application"}),(0,a.jsx)("button",{onClick:()=>{d((0,Y.E2)()),n()},className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:(0,a.jsx)(b.A,{size:24})})]}),(0,a.jsxs)("form",{onSubmit:e=>{e.preventDefault(),u(""),l({...c,application_date:new Date(c.application_date).toISOString()}),d((0,Y.E2)())},className:"p-6 space-y-6",children:[m&&(0,a.jsx)("div",{className:"bg-red-50 dark:bg-red-900/30 text-red-600 dark:text-red-400 p-3 rounded-lg text-sm",children:m}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[(0,a.jsx)(N.A,{size:16,className:"inline mr-2"}),"Company Name"]}),(0,a.jsx)("input",{type:"text",required:!0,value:c.company_name,onChange:e=>d((0,Y.w6)({field:"company_name",value:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",placeholder:"Enter company name"})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[(0,a.jsx)(x.A,{size:16,className:"inline mr-2"}),"Position"]}),(0,a.jsx)("input",{type:"text",required:!0,value:c.position,onChange:e=>d((0,Y.w6)({field:"position",value:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",placeholder:"Enter position title"})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[(0,a.jsx)(w.A,{size:16,className:"inline mr-2"}),"Application Date"]}),(0,a.jsx)("input",{type:"date",required:!0,value:c.application_date,onChange:e=>d((0,Y.w6)({field:"application_date",value:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white"})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[(0,a.jsx)(B.A,{size:16,className:"inline mr-2"}),"Location"]}),(0,a.jsx)("input",{type:"text",value:c.location,onChange:e=>d((0,Y.w6)({field:"location",value:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",placeholder:"e.g., San Francisco, CA"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Status"}),(0,a.jsx)("select",{value:c.status,onChange:e=>d((0,Y.w6)({field:"status",value:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",children:Object.values(ed).map(e=>(0,a.jsx)("option",{value:e,children:"not_applied"===e?"Not Applied":e.charAt(0).toUpperCase()+e.slice(1).replace("_"," ")},e))})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[(0,a.jsx)(H.A,{size:16,className:"inline mr-2"}),"URL of the Job Posting"]}),(0,a.jsx)("input",{type:"url",value:c.job_posting_url,onChange:e=>d((0,Y.w6)({field:"job_posting_url",value:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",placeholder:"https://example.com/job-posting"}),(0,a.jsx)("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"Enter the direct URL to the job posting for reference"})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[(0,a.jsx)(k.A,{size:16,className:"inline mr-2"}),"Job Description"]}),(0,a.jsx)("textarea",{value:c.job_description,onChange:e=>d((0,Y.w6)({field:"job_description",value:e.target.value})),rows:4,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",placeholder:"Paste the job description here..."})]}),(0,a.jsxs)("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg",children:[(0,a.jsxs)("button",{type:"button",onClick:()=>{if(!c.job_description.trim())return void u("Please add a job description first to use AI enhancement");d((0,q.$V)()),d((0,q.qf)({jobDescription:c.job_description})),g(!0)},disabled:!c.job_description.trim(),className:"w-full flex items-center justify-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-blue-400 disabled:cursor-not-allowed transition-colors",children:[(0,a.jsx)(F.A,{size:18}),"AI Enhance Resume & Cover Letter"]}),(0,a.jsxs)("p",{className:"text-xs text-center text-blue-600 dark:text-blue-400 mt-2",children:["Generate AI-optimized resume and cover letter tailored to this specific job posting.",!c.job_description&&" Please add a job description first."]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Resume URL"}),(0,a.jsx)("input",{type:"url",value:c.resume_url,onChange:e=>d((0,Y.w6)({field:"resume_url",value:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",placeholder:"https://example.com/resume.pdf"}),(0,a.jsx)("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"Enter a direct URL to your resume"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Cover Letter URL"}),(0,a.jsx)("input",{type:"url",value:c.cover_letter_url,onChange:e=>d((0,Y.w6)({field:"cover_letter_url",value:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",placeholder:"https://example.com/cover-letter.pdf"}),(0,a.jsx)("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"Enter a direct URL to your cover letter"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Notes"}),(0,a.jsx)("textarea",{value:c.notes,onChange:e=>d((0,Y.w6)({field:"notes",value:e.target.value})),rows:3,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",placeholder:"Add any notes about this application..."})]}),(0,a.jsxs)("div",{className:"flex gap-4 pt-4",children:[(0,a.jsx)("button",{type:"submit",className:"flex-1 bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white py-2 px-4 rounded-lg font-medium transition-all",children:t?"Update Application":"Add Application"}),(0,a.jsx)("button",{type:"button",onClick:n,className:"flex-1 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 py-2 px-4 rounded-lg font-medium hover:bg-gray-200 dark:hover:bg-gray-600 transition-all",children:"Cancel"})]})]})]})}),p&&(0,a.jsx)(en,{jobDescription:c.job_description,applicationData:{position:c.position,company_name:c.company_name,location:c.location},detailedUserProfile:r,onSave:(e,t)=>{d((0,Y.po)({...c,resume_url:e,cover_letter_url:t,notes:c.notes+(c.notes?"\n\n":"")+"AI-enhanced documents generated on ".concat(new Date().toLocaleDateString()," based on job posting analysis.")})),d((0,q.Oo)()),g(!1)},onClose:()=>{d((0,q.Oo)()),g(!1)}})]})};var em=r(1575),eu=r(9116),ex=r(345),ep=r(5961);class eg{static basePath(e){return"jobPreferences/".concat(e)}static async getUserJobPreferences(e){return er.read(this.basePath(e))}static async saveJobPreferences(e,t){let r={...t,updated_at:new Date().toISOString()};return er.set(this.basePath(e),r)}static async deleteJobPreferences(e){return er.delete(this.basePath(e))}}var eh=r(5098);let eb=e=>{let{onClose:t}=e,{user:r}=(0,es.A)(),{showSuccess:l,showError:i,showInfo:o}=(0,eh.Y)(),[n,d]=(0,s.useState)(!0),[c,u]=(0,s.useState)(!1),[x,g]=(0,s.useState)(null),[h,y]=(0,s.useState)(new Set(["jobTitles","salary","location"])),[f,j]=(0,s.useState)({jobTitles:[""],locations:[""],salaryMin:"",employmentTypes:[],remotePreference:"flexible"});(0,s.useEffect)(()=>{(async()=>{if(r)try{d(!0);let s=await eg.getUserJobPreferences(r.uid);if(s){var e,t,a;g(s),j({jobTitles:(null==(e=s.job_titles)?void 0:e.length)?s.job_titles:[""],locations:(null==(t=s.locations)?void 0:t.length)?s.locations:[""],salaryMin:(null==(a=s.salary_expectation)?void 0:a.toString())||"",employmentTypes:s.employment_types||[],remotePreference:s.remote_only?"remote_only":"flexible"})}}catch(e){console.error("Error loading job preferences:",e),i("Failed to load preferences","Please try again later.")}finally{d(!1)}})()},[r]);let v=e=>{let t=new Set(h);t.has(e)?t.delete(e):t.add(e),y(t)},k=(e,t)=>{j(r=>({...r,[e]:t}))},w=(e,t,r)=>{j(a=>{let s=[...a[e]];return s[t]=r,{...a,[e]:s}})},N=e=>{j(t=>({...t,[e]:[...t[e],""]}))},_=(e,t)=>{j(r=>{let a=[...r[e]];return a.splice(t,1),0===a.length&&a.push(""),{...r,[e]:a}})},A=async()=>{if(!r)return void i("Not Authenticated","Please log in to save your preferences.");try{u(!0);let e={job_titles:f.jobTitles.filter(e=>""!==e.trim()),locations:f.locations.filter(e=>""!==e.trim()),salary_expectation:f.salaryMin?parseInt(f.salaryMin):null,employment_types:f.employmentTypes,remote_only:"remote_only"===f.remotePreference,skills:(null==x?void 0:x.skills)||[]};await eg.saveJobPreferences(r.uid,e);let t=await eg.getUserJobPreferences(r.uid);g(t),l("Preferences Saved","Your job preferences have been successfully saved.")}catch(e){console.error("Error saving job preferences:",e),i("Save Failed","Failed to save your preferences. Please try again.")}finally{u(!1)}};return n?(0,a.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:(0,a.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-lg w-full max-w-4xl mx-4 p-6",children:(0,a.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})})})}):(0,a.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg w-full max-w-4xl mx-4 p-6 max-h-[90vh] overflow-y-auto",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6 sticky top-0 bg-white dark:bg-gray-800 z-10 pb-4 border-b border-gray-200 dark:border-gray-700",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Job Preferences"}),(0,a.jsx)("button",{onClick:t,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors","aria-label":"Close",children:(0,a.jsx)(b.A,{className:"w-5 h-5 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200"})})]}),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg overflow-hidden",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-700 cursor-pointer",onClick:()=>v("jobTitles"),children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(T.A,{className:"text-blue-500 dark:text-blue-400",size:20}),(0,a.jsx)("h3",{className:"font-medium text-gray-900 dark:text-white",children:"Job Type & Titles"})]}),h.has("jobTitles")?(0,a.jsx)(em.A,{size:20,className:"text-gray-500"}):(0,a.jsx)(p.A,{size:20,className:"text-gray-500"})]}),h.has("jobTitles")&&(0,a.jsxs)("div",{className:"p-4 space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Preferred Job Titles"}),(0,a.jsx)("div",{className:"space-y-2",children:f.jobTitles.map((e,t)=>(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("input",{type:"text",value:e,onChange:e=>w("jobTitles",t,e.target.value),className:"flex-1 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",placeholder:"e.g., Software Engineer"}),(0,a.jsx)("button",{type:"button",onClick:()=>_("jobTitles",t),className:"p-2 text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg",disabled:1===f.jobTitles.length,children:(0,a.jsx)(J.A,{size:18})})]},"job-title-".concat(t)))}),(0,a.jsxs)("button",{type:"button",onClick:()=>N("jobTitles"),className:"mt-2 text-sm text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 flex items-center gap-1",children:[(0,a.jsx)(m.A,{size:16}),"Add Another Job Title"]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Employment Type"}),(0,a.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2",children:["full-time","part-time","contract","internship"].map(e=>(0,a.jsxs)("label",{className:"flex items-center space-x-2",children:[(0,a.jsx)("input",{type:"checkbox",checked:f.employmentTypes.includes(e),onChange:()=>(e=>{j(t=>{let r=[...t.employmentTypes];return r.includes(e)?{...t,employmentTypes:r.filter(t=>t!==e)}:{...t,employmentTypes:[...r,e]}})})(e),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),(0,a.jsx)("span",{className:"text-gray-700 dark:text-gray-300",children:e.charAt(0).toUpperCase()+e.slice(1)})]},e))})]})]})]}),(0,a.jsxs)("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg overflow-hidden",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-700 cursor-pointer",onClick:()=>v("salary"),children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(eu.A,{className:"text-green-500 dark:text-green-400",size:20}),(0,a.jsx)("h3",{className:"font-medium text-gray-900 dark:text-white",children:"Salary Expectations"})]}),h.has("salary")?(0,a.jsx)(em.A,{size:20,className:"text-gray-500"}):(0,a.jsx)(p.A,{size:20,className:"text-gray-500"})]}),h.has("salary")&&(0,a.jsxs)("div",{className:"p-4",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Expected Salary (USD per year)"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("span",{className:"absolute inset-y-0 left-0 flex items-center pl-3 text-gray-500 dark:text-gray-400",children:"$"}),(0,a.jsx)("input",{type:"number",value:f.salaryMin,onChange:e=>k("salaryMin",e.target.value),className:"w-full pl-7 pr-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",placeholder:"e.g., 85000",min:"0",step:"1000"})]})]})]}),(0,a.jsxs)("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg overflow-hidden",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-700 cursor-pointer",onClick:()=>v("location"),children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(B.A,{className:"text-purple-500 dark:text-purple-400",size:20}),(0,a.jsx)("h3",{className:"font-medium text-gray-900 dark:text-white",children:"Location Preferences"})]}),h.has("location")?(0,a.jsx)(em.A,{size:20,className:"text-gray-500"}):(0,a.jsx)(p.A,{size:20,className:"text-gray-500"})]}),h.has("location")&&(0,a.jsxs)("div",{className:"p-4 space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Preferred Locations"}),(0,a.jsx)("div",{className:"space-y-2",children:f.locations.map((e,t)=>(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("input",{type:"text",value:e,onChange:e=>w("locations",t,e.target.value),className:"flex-1 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",placeholder:"e.g., San Francisco, CA or Remote"}),(0,a.jsx)("button",{type:"button",onClick:()=>_("locations",t),className:"p-2 text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg",disabled:1===f.locations.length,children:(0,a.jsx)(J.A,{size:18})})]},"location-".concat(t)))}),(0,a.jsxs)("button",{type:"button",onClick:()=>N("locations"),className:"mt-2 text-sm text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 flex items-center gap-1",children:[(0,a.jsx)(m.A,{size:16}),"Add Another Location"]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Remote Preference"}),(0,a.jsxs)("select",{value:f.remotePreference,onChange:e=>k("remotePreference",e.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",children:[(0,a.jsx)("option",{value:"flexible",children:"Flexible"}),(0,a.jsx)("option",{value:"remote_only",children:"Remote Only"}),(0,a.jsx)("option",{value:"on_site_only",children:"On-site Only"})]})]})]})]}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:[(0,a.jsx)("button",{type:"button",onClick:A,disabled:c,className:"flex-1 bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white px-6 py-3 rounded-lg font-medium flex items-center justify-center gap-2 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:c?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),"Saving..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(ex.A,{size:18}),"Save Preferences"]})}),(0,a.jsxs)("button",{type:"button",onClick:()=>{if(x){var e,t,r;j({jobTitles:(null==(e=x.job_titles)?void 0:e.length)?x.job_titles:[""],locations:(null==(t=x.locations)?void 0:t.length)?x.locations:[""],salaryMin:(null==(r=x.salary_expectation)?void 0:r.toString())||"",employmentTypes:x.employment_types||[],remotePreference:x.remote_only?"remote_only":"flexible"})}else j({jobTitles:[""],locations:[""],salaryMin:"",employmentTypes:[],remotePreference:"flexible"});o("Form Reset","The form has been reset to its original values.")},className:"px-6 py-3 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors flex items-center gap-2",children:[(0,a.jsx)(ep.A,{size:18}),"Reset Form"]}),(0,a.jsx)("button",{type:"button",onClick:t,className:"px-6 py-3 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:"Close"})]})]}),x&&(0,a.jsxs)("div",{className:"mt-8 pt-6 border-t border-gray-200 dark:border-gray-700",children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"Current Saved Preferences"}),(0,a.jsx)("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4",children:(0,a.jsxs)("dl",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-4 gap-y-2 text-sm",children:[x.job_titles&&x.job_titles.length>0&&(0,a.jsxs)("div",{className:"col-span-2",children:[(0,a.jsx)("dt",{className:"font-medium text-gray-700 dark:text-gray-300",children:"Job Titles"}),(0,a.jsx)("dd",{className:"mt-1 text-gray-600 dark:text-gray-400",children:x.job_titles.join(", ")})]}),x.locations&&x.locations.length>0&&(0,a.jsxs)("div",{className:"col-span-2",children:[(0,a.jsx)("dt",{className:"font-medium text-gray-700 dark:text-gray-300",children:"Locations"}),(0,a.jsx)("dd",{className:"mt-1 text-gray-600 dark:text-gray-400",children:x.locations.join(", ")})]}),x.salary_expectation&&(0,a.jsxs)("div",{children:[(0,a.jsx)("dt",{className:"font-medium text-gray-700 dark:text-gray-300",children:"Salary Expectation"}),(0,a.jsx)("dd",{className:"mt-1 text-gray-600 dark:text-gray-400",children:"$".concat(x.salary_expectation.toLocaleString())})]}),void 0!==x.remote_only&&(0,a.jsxs)("div",{children:[(0,a.jsx)("dt",{className:"font-medium text-gray-700 dark:text-gray-300",children:"Remote Preference"}),(0,a.jsx)("dd",{className:"mt-1 text-gray-600 dark:text-gray-400",children:x.remote_only?"Remote Only":"Flexible"})]}),x.employment_types&&x.employment_types.length>0&&(0,a.jsxs)("div",{children:[(0,a.jsx)("dt",{className:"font-medium text-gray-700 dark:text-gray-300",children:"Employment Types"}),(0,a.jsx)("dd",{className:"mt-1 text-gray-600 dark:text-gray-400",children:x.employment_types.map(e=>e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()).join(", ")})]})]})})]})]})})};var ey=r(8186);class ef{static basePath(e){return"users/".concat(e,"/jobPreferences")}static async getJobPreferences(e){return er.read(this.basePath(e))}static async saveJobPreferences(e,t){let r={...t,user_id:e};return er.create(this.basePath(e),r)}static async updateJobPreferences(e,t){return er.update(this.basePath(e),t)}}let ej=e=>{let{isOpen:t,searchForm:r,searchResults:l,searchLoading:i,searchError:o,onClose:n,onFormChange:d,onSearch:u,onSaveJob:x,onSaveMultipleJobs:h,onClear:y}=e,{user:f}=(0,es.A)(),[j,v]=(0,s.useState)(null),[k,w]=(0,s.useState)(!1),[N,_]=(0,s.useState)(new Set);(0,s.useEffect)(()=>{t&&f&&A()},[t,f]),(0,s.useEffect)(()=>{l.length>0&&w(!0)},[l]),(0,s.useEffect)(()=>{t&&(_(new Set),w(!1))},[t]);let A=async()=>{if(f)try{let e=await ef.getJobPreferences(f.uid);v(e)}catch(e){console.error("Error loading job preferences:",e)}},E=e=>{if(j){if("query"===e){let e=(j.preferred_job_titles||[]).find(e=>""!==e.trim())||"";d({...r,query:e})}else if("location"===e){let e=(j.preferred_locations||[]).find(e=>""!==e.trim())||"";d({...r,location:e})}}},P=(e,t)=>{d({...r,[e]:t})};return t?(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg max-w-6xl w-full max-h-[90vh] overflow-hidden",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"AI Job Search"}),(0,a.jsx)("button",{onClick:n,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:(0,a.jsx)(b.A,{size:20,className:"text-gray-500"})})]}),(0,a.jsxs)("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-140px)]",children:[j&&(0,a.jsxs)("div",{className:"bg-blue-50 dark:bg-blue-900/30 border border-blue-200 dark:border-blue-700 rounded-lg p-4 mb-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("h3",{className:"font-medium text-blue-900 dark:text-blue-100",children:"Use Your Job Preferences"}),(0,a.jsx)("button",{onClick:()=>{if(!j)return;let e=j.preferred_job_titles||[],t=j.preferred_locations||[],a=e.find(e=>""!==e.trim())||"",s=t.find(e=>""!==e.trim())||"";d({...r,query:a,location:s})},className:"text-sm bg-blue-600 hover:bg-blue-700 text-white px-3 py-1 rounded",children:"Auto-fill"})]}),(0,a.jsxs)("div",{className:"mt-2 space-y-2 text-sm",children:[j.preferred_job_titles&&j.preferred_job_titles.filter(e=>e.trim()).length>0&&(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium text-blue-700 dark:text-blue-300",children:"Job Titles:"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-1 mt-1",children:j.preferred_job_titles.filter(e=>e.trim()).slice(0,3).map((e,t)=>(0,a.jsx)("span",{className:"px-2 py-1 bg-blue-100 dark:bg-blue-800 text-blue-700 dark:text-blue-300 rounded text-xs",children:e},t))})]}),j.preferred_locations&&j.preferred_locations.filter(e=>e.trim()).length>0&&(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium text-blue-700 dark:text-blue-300",children:"Preferred Locations:"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-1 mt-1",children:j.preferred_locations.filter(e=>e.trim()).slice(0,3).map((e,t)=>(0,a.jsx)("span",{className:"px-2 py-1 bg-blue-100 dark:bg-blue-800 text-blue-700 dark:text-blue-300 rounded text-xs",children:e},t))})]})]})]}),(0,a.jsxs)("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg mb-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 cursor-pointer bg-gray-50 dark:bg-gray-800 rounded-t-lg",onClick:()=>w(!k),children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Search Parameters"}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[l.length>0&&(0,a.jsxs)("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:[l.length," jobs found"]}),k?(0,a.jsx)(p.A,{size:20,className:"text-gray-500"}):(0,a.jsx)(em.A,{size:20,className:"text-gray-500"})]})]}),!k&&(0,a.jsxs)("div",{className:"p-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(ey.A,{size:16}),"Job Title / Keywords *"]})}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("input",{type:"text",value:r.query,onChange:e=>P("query",e.target.value),className:"flex-1 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",placeholder:"e.g. Software Engineer, React Developer",required:!0}),j&&(0,a.jsx)("button",{type:"button",onClick:()=>E("query"),className:"px-3 py-2 text-sm bg-blue-100 dark:bg-blue-900 text-blue-700 dark:text-blue-300 rounded-lg hover:bg-blue-200 dark:hover:bg-blue-800",title:"Use from preferences",children:(0,a.jsx)(g.A,{size:16})})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(B.A,{size:16}),"Location"]})}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("input",{type:"text",value:r.location,onChange:e=>P("location",e.target.value),className:"flex-1 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",placeholder:"e.g. New York, NY or Remote"}),j&&(0,a.jsx)("button",{type:"button",onClick:()=>E("location"),className:"px-3 py-2 text-sm bg-blue-100 dark:bg-blue-900 text-blue-700 dark:text-blue-300 rounded-lg hover:bg-blue-200 dark:hover:bg-blue-800",title:"Use from preferences",children:(0,a.jsx)(g.A,{size:16})})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Experience Level"}),(0,a.jsxs)("select",{value:r.experience,onChange:e=>P("experience",e.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",children:[(0,a.jsx)("option",{value:"",children:"Any Experience"}),(0,a.jsx)("option",{value:"entry_level",children:"Entry Level"}),(0,a.jsx)("option",{value:"mid_level",children:"Mid Level"}),(0,a.jsx)("option",{value:"senior_level",children:"Senior Level"}),(0,a.jsx)("option",{value:"executive",children:"Executive"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Employment Type"}),(0,a.jsxs)("select",{value:r.employment_type,onChange:e=>P("employment_type",e.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",children:[(0,a.jsx)("option",{value:"",children:"Any Type"}),(0,a.jsx)("option",{value:"FULLTIME",children:"Full Time"}),(0,a.jsx)("option",{value:"PARTTIME",children:"Part Time"}),(0,a.jsx)("option",{value:"CONTRACTOR",children:"Contract"}),(0,a.jsx)("option",{value:"INTERN",children:"Internship"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Date Posted"}),(0,a.jsxs)("select",{value:r.date_posted,onChange:e=>P("date_posted",e.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",children:[(0,a.jsx)("option",{value:"",children:"Any time"}),(0,a.jsx)("option",{value:"today",children:"Today"}),(0,a.jsx)("option",{value:"3days",children:"Past 3 days"}),(0,a.jsx)("option",{value:"week",children:"Past week"}),(0,a.jsx)("option",{value:"month",children:"Past month"})]})]}),(0,a.jsx)("div",{className:"flex items-center",children:(0,a.jsxs)("label",{className:"flex items-center",children:[(0,a.jsx)("input",{type:"checkbox",checked:r.remote_jobs_only,onChange:e=>P("remote_jobs_only",e.target.checked),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),(0,a.jsx)("span",{className:"ml-2 text-sm text-gray-700 dark:text-gray-300",children:"Remote jobs only"})]})})]}),o&&(0,a.jsx)("div",{className:"bg-red-50 dark:bg-red-900/30 text-red-600 dark:text-red-400 p-3 rounded-lg mb-4",children:o}),(0,a.jsxs)("div",{className:"flex gap-4",children:[(0,a.jsx)("button",{onClick:u,disabled:i||!r.query.trim(),className:"bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700 disabled:from-gray-400 disabled:to-gray-500 text-white px-6 py-3 rounded-lg font-medium flex items-center gap-2 transition-all disabled:cursor-not-allowed",children:i?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),"Searching..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(c.A,{size:20}),"Search Jobs"]})}),(0,a.jsx)("button",{onClick:y,className:"px-6 py-3 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg font-medium hover:bg-gray-200 dark:hover:bg-gray-600 transition-all",children:"Clear"})]})]})]}),l.length>0&&(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:["Search Results (",l.length," jobs found)"]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("button",{onClick:()=>{_(new Set(l.map((e,t)=>t)))},className:"text-sm bg-blue-100 dark:bg-blue-900 text-blue-700 dark:text-blue-300 px-3 py-1 rounded hover:bg-blue-200 dark:hover:bg-blue-800",children:"Select All"}),(0,a.jsx)("button",{onClick:()=>{_(new Set)},className:"text-sm bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 px-3 py-1 rounded hover:bg-gray-200 dark:hover:bg-gray-600",children:"Clear Selection"}),N.size>0&&(0,a.jsxs)("button",{onClick:()=>{let e=Array.from(N).map(e=>l[e]);h?h(e):e.forEach(e=>x(e)),_(new Set)},className:"text-sm bg-green-600 hover:bg-green-700 text-white px-3 py-1 rounded flex items-center gap-1",children:[(0,a.jsx)(m.A,{size:14}),"Save Selected (",N.size,")"]})]})]}),(0,a.jsx)("div",{className:"max-h-96 overflow-y-auto space-y-4",children:l.map((e,t)=>{var r;return(0,a.jsx)("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4 transition-all ".concat(N.has(t)?"bg-blue-50 dark:bg-blue-900/20 border-blue-300 dark:border-blue-600":""),children:(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)("input",{type:"checkbox",checked:N.has(t),onChange:()=>(e=>{let t=new Set(N);t.has(e)?t.delete(e):t.add(e),_(t)})(t),className:"mt-1 rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex justify-between items-start mb-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-semibold text-gray-900 dark:text-white text-lg",children:e.job_title||"Job Title Not Available"}),(0,a.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:e.employer_name||"Company Not Specified"}),(0,a.jsxs)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[e.job_city&&e.job_state?"".concat(e.job_city,", ").concat(e.job_state):e.job_country||"Location not specified",e.job_is_remote&&"  Remote"]})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,a.jsxs)("button",{onClick:()=>x(e),className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg font-medium flex items-center gap-2 transition-all text-sm",children:[(0,a.jsx)(m.A,{size:16}),"Save Job"]}),e.job_apply_link&&(0,a.jsxs)("a",{href:e.job_apply_link,target:"_blank",rel:"noopener noreferrer",className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg font-medium flex items-center gap-2 transition-all text-sm text-center",children:[(0,a.jsx)(I.A,{size:16}),"Apply Now"]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm text-gray-600 dark:text-gray-400 mb-3",children:[e.job_employment_type&&(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium",children:"Type:"})," ",e.job_employment_type]}),e.job_posted_at_datetime_utc&&(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium",children:"Posted:"})," ",(0,R.GP)(new Date(e.job_posted_at_datetime_utc),"MMM d, yyyy")]}),e.job_salary_currency&&e.job_min_salary&&(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium",children:"Salary:"})," ",e.job_salary_currency," ",null==(r=e.job_min_salary)?void 0:r.toLocaleString(),e.job_max_salary&&" - ".concat(e.job_max_salary.toLocaleString()),e.job_salary_period&&" /".concat(e.job_salary_period)]}),e.job_experience_in_place_of_education&&(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium",children:"Experience:"})," ",e.job_experience_in_place_of_education?"Required":"Not Required"]})]})]})]})},t)})})]})]})]})}):null};var ev=r(2347),ek=r(588),ew=r(4105),eN=r(769),e_=r(7297),eA=r(306),eE=r(9980);let eP=e=>{let{onSubmit:t,onCancel:r,isLoading:l=!1,initialData:i={}}=e,o=(0,s.useRef)(!0),n=(0,s.useRef)(null),d=(0,s.useRef)(!1),[c,u]=(0,s.useState)({}),[g,h]=(0,s.useState)(!1),[y,f]=(0,s.useState)({fullName:i.fullName||"",email:i.email||"",phone:i.phone||"",location:i.location||"",currentJobTitle:i.currentJobTitle||"",jobProfile:i.jobProfile||"",experience:i.experience||"Fresher",workExperience:i.workExperience&&i.workExperience.length>0?JSON.parse(JSON.stringify(i.workExperience)):[{jobTitle:"",company:"",duration:""}],education:i.education&&i.education.length>0?JSON.parse(JSON.stringify(i.education)):[{degree:"",institution:"",graduationYear:""}],skills:Array.isArray(i.skills)?[...i.skills]:[],expectedSalary:i.expectedSalary||"",currentCTC:i.currentCTC||"",employmentType:i.employmentType||"",remoteJobsOnly:i.remoteJobsOnly||!1,datePosted:i.datePosted||"",willingnessToRelocate:i.willingnessToRelocate||!1,workAuthorization:i.workAuthorization||"",noticePeriod:i.noticePeriod||"",availability:i.availability||"",references:i.references||"",socialLinks:i.socialLinks||{}}),[j,v]=(0,s.useState)({}),[k,w]=(0,s.useState)(""),[_,A]=(0,s.useState)(0),E=(e,t)=>{switch(t){case 0:return{fullName:e.fullName,email:e.email,phone:e.phone,location:e.location};case 1:return{currentJobTitle:e.currentJobTitle,jobProfile:e.jobProfile,experience:e.experience,workExperience:e.workExperience};case 2:return{education:e.education,skills:e.skills,expectedSalary:e.expectedSalary,currentCTC:e.currentCTC};case 3:return{employmentType:e.employmentType,remoteJobsOnly:e.remoteJobsOnly,datePosted:e.datePosted};case 4:return{willingnessToRelocate:e.willingnessToRelocate,workAuthorization:e.workAuthorization,noticePeriod:e.noticePeriod,availability:e.availability};case 5:return{references:e.references,socialLinks:e.socialLinks};default:return{}}};(0,s.useEffect)(()=>()=>{o.current=!1},[]),(0,s.useEffect)(()=>{if(console.log("useEffect triggered"),i&&i.fullName&&!d.current){console.log("\uD83D\uDCCB Initializing form with data:",i);let e={fullName:i.fullName||"",email:i.email||"",phone:i.phone||"",location:i.location||"",currentJobTitle:i.currentJobTitle||"",jobProfile:i.jobProfile||"",experience:i.experience||"Fresher",workExperience:i.workExperience&&i.workExperience.length>0?JSON.parse(JSON.stringify(i.workExperience)):[{jobTitle:"",company:"",duration:""}],education:i.education&&i.education.length>0?JSON.parse(JSON.stringify(i.education)):[{degree:"",institution:"",graduationYear:""}],skills:Array.isArray(i.skills)?[...i.skills]:[],expectedSalary:i.expectedSalary||"",currentCTC:i.currentCTC||"",employmentType:i.employmentType||"",remoteJobsOnly:i.remoteJobsOnly||!1,datePosted:i.datePosted||"",willingnessToRelocate:i.willingnessToRelocate||!1,workAuthorization:i.workAuthorization||"",noticePeriod:i.noticePeriod||"",availability:i.availability||"",references:i.references||"",socialLinks:i.socialLinks||{}};f(e),u({0:E(e,0),1:E(e,1),2:E(e,2),3:E(e,3),4:E(e,4),5:E(e,5)}),d.current=!0,console.log(" Form initialized with data")}},[i,d]),(0,s.useEffect)(()=>{let e=localStorage.getItem("jobSearchCriteria");if(e)try{let t=JSON.parse(e);f(e=>({...e,jobProfile:t.query||e.jobProfile,location:t.location||e.location,employmentType:t.employment_type||e.employmentType,remoteJobsOnly:t.remote_jobs_only||e.remoteJobsOnly,datePosted:t.date_posted||e.datePosted,experience:"entry_level"===t.experience?"Fresher":t.experience?"Experienced":e.experience}))}catch(e){console.error("Error parsing job search criteria:",e)}},[]),(0,s.useEffect)(()=>{let e=e=>{5===_&&(e.preventDefault(),e.stopPropagation())},t=n.current;if(t&&5===_)return t.addEventListener("wheel",e,{passive:!1}),()=>{t.removeEventListener("wheel",e)}},[_]);let P=eE.t.getCommonJobProfiles(),S=eE.t.getPopularLocations(),C=["Basic Information","Job Information","Education","Skills & Salary","Work Authorization","References & Social"],D=(e,t)=>{if(f(r=>({...r,[e]:t})),u(r=>({...r,[_]:{...r[_],[e]:t}})),j[e]){let t={...j};delete t[e],v(t)}},F=()=>{let e=[...y.workExperience,{jobTitle:"",company:"",duration:""}];f(t=>({...t,workExperience:e})),u(t=>({...t,[_]:{...t[_],workExperience:e}}))},L=(e,t,r)=>{let a=y.workExperience.map((a,s)=>s===e?{...a,[t]:r}:a);f(e=>({...e,workExperience:a})),u(e=>({...e,[_]:{...e[_],workExperience:a}}))},U=()=>{let e=[...y.education,{degree:"",institution:"",graduationYear:""}];f(t=>({...t,education:e})),u(t=>({...t,[_]:{...t[_],education:e}}))},R=(e,t,r)=>{let a=y.education.map((a,s)=>s===e?{...a,[t]:r}:a);f(e=>({...e,education:a})),u(e=>({...e,[_]:{...e[_],education:a}}))},O=()=>{if(k.trim()&&!y.skills.includes(k.trim())){let e=[...y.skills,k.trim()];f(t=>({...t,skills:e})),u(t=>({...t,[_]:{...t[_],skills:e}})),w("")}};return(0,a.jsxs)("div",{className:"space-y-6",ref:n,onClick:e=>e.stopPropagation(),children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"w-16 h-16 bg-gradient-to-r from-blue-600 to-purple-600 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,a.jsx)(x.A,{className:"h-8 w-8 text-white"})}),(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Complete Your Profile"}),(0,a.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:"Help us find the perfect opportunities for you"})]}),(0,a.jsx)("div",{className:"flex justify-between items-center",children:C.map((e,t)=>(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium ".concat(t<=_?"bg-blue-600 text-white":"bg-gray-200 dark:bg-gray-700 text-gray-500"),children:t+1}),t<C.length-1&&(0,a.jsx)("div",{className:"w-8 h-1 mx-2 ".concat(t<_?"bg-blue-600":"bg-gray-200 dark:bg-gray-700")})]},t))}),(0,a.jsx)("div",{className:"text-center",children:(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:C[_]})}),(0,a.jsxs)("form",{onSubmit:e=>{console.log("\uD83D\uDD25 FORM SUBMIT TRIGGERED!"),console.log("\uD83D\uDD25 Event:",e),console.log("\uD83D\uDD25 Form data being submitted:",y),console.log("\uD83D\uDD25 Submit timestamp:",new Date().toISOString()),e.preventDefault(),e.stopPropagation(),h(!0),console.log("\uD83D\uDD25 Running form validation..."),(()=>{console.log("\uD83D\uDD0D Starting validation...");let e={};return y.fullName.trim()||(e.fullName="Full name is required",console.log(" fullName validation failed:",y.fullName)),y.email.trim()||(e.email="Email is required",console.log(" email validation failed:",y.email)),y.location.trim()||(e.location="Location is required",console.log(" location validation failed:",y.location)),y.email&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(y.email)&&(e.email="Please enter a valid email address",console.log(" email format validation failed:",y.email)),console.log("\uD83D\uDD0D Validation complete. Errors found:",e),console.log("\uD83D\uDD0D Validation result:",0===Object.keys(e).length?"PASSED":"FAILED"),v(e),0===Object.keys(e).length})()?(console.log("\uD83D\uDD25 Validation passed! Calling onSubmit..."),console.log("\uD83D\uDD25 onSubmit function:",t),t(y),console.log("\uD83D\uDD25 onSubmit called successfully!")):(console.log("\uD83D\uDD25 Validation failed!"),console.log("\uD83D\uDD25 Validation errors:",j),console.log("\uD83D\uDD25 Form data that failed validation:",y),h(!1))},className:"space-y-6",onClick:e=>e.stopPropagation(),children:[(()=>{switch(_){case 0:default:return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[(0,a.jsx)(x.A,{className:"h-4 w-4 inline mr-2"}),"Full Name *"]}),(0,a.jsx)("input",{type:"text",value:y.fullName,onChange:e=>D("fullName",e.target.value),className:"w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white ".concat(j.fullName?"border-red-500":"border-gray-300"),placeholder:"Enter your full name",disabled:l}),j.fullName&&(0,a.jsx)("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:j.fullName})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[(0,a.jsx)(ev.A,{className:"h-4 w-4 inline mr-2"}),"Email Address *"]}),(0,a.jsx)("input",{type:"email",value:y.email,onChange:e=>D("email",e.target.value),className:"w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white ".concat(j.email?"border-red-500":"border-gray-300"),placeholder:"Enter your email address",disabled:l}),j.email&&(0,a.jsx)("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:j.email})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[(0,a.jsx)(ek.A,{className:"h-4 w-4 inline mr-2"}),"Phone Number"]}),(0,a.jsx)("input",{type:"tel",value:y.phone,onChange:e=>D("phone",e.target.value),className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",placeholder:"Enter your phone number",disabled:l})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[(0,a.jsx)(B.A,{className:"h-4 w-4 inline mr-2"}),"Location (City, State, Country) *"]}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("input",{type:"text",list:"locations",value:y.location,onChange:e=>D("location",e.target.value),className:"w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white ".concat(j.location?"border-red-500":"border-gray-300"),placeholder:"e.g., New York, NY, USA",disabled:l}),(0,a.jsx)("datalist",{id:"locations",children:S.map(e=>(0,a.jsx)("option",{value:e},e))}),(0,a.jsx)(p.A,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400 pointer-events-none"})]}),j.location&&(0,a.jsx)("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:j.location})]})]});case 1:return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[(0,a.jsx)(T.A,{className:"h-4 w-4 inline mr-2"}),"Current Job Title / Employment Status"]}),(0,a.jsx)("input",{type:"text",value:y.currentJobTitle,onChange:e=>D("currentJobTitle",e.target.value),className:"w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white ".concat(j.currentJobTitle?"border-red-500":"border-gray-300"),placeholder:"e.g., Software Engineer, Student, Unemployed",disabled:l}),j.currentJobTitle&&(0,a.jsx)("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:j.currentJobTitle})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[(0,a.jsx)(T.A,{className:"h-4 w-4 inline mr-2"}),"Desired Job Profile"]}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("input",{type:"text",list:"jobProfiles",value:y.jobProfile,onChange:e=>D("jobProfile",e.target.value),className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",placeholder:"e.g., Software Developer, Data Scientist",disabled:l}),(0,a.jsx)("datalist",{id:"jobProfiles",children:P.map(e=>(0,a.jsx)("option",{value:e},e))}),(0,a.jsx)(p.A,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400 pointer-events-none"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Experience Level"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("label",{className:"relative",children:[(0,a.jsx)("input",{type:"radio",name:"experience",value:"Fresher",checked:"Fresher"===y.experience,onChange:e=>D("experience",e.target.value),className:"sr-only",disabled:l}),(0,a.jsx)("div",{className:"p-4 border-2 rounded-lg cursor-pointer transition-all ".concat("Fresher"===y.experience?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-gray-300 dark:border-gray-600 hover:border-gray-400"),children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"Fresher"}),(0,a.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"0-2 years experience"})]})})]}),(0,a.jsxs)("label",{className:"relative",children:[(0,a.jsx)("input",{type:"radio",name:"experience",value:"Experienced",checked:"Experienced"===y.experience,onChange:e=>D("experience",e.target.value),className:"sr-only",disabled:l}),(0,a.jsx)("div",{className:"p-4 border-2 rounded-lg cursor-pointer transition-all ".concat("Experienced"===y.experience?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-gray-300 dark:border-gray-600 hover:border-gray-400"),children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"Experienced"}),(0,a.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"2+ years experience"})]})})]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:[(0,a.jsx)(N.A,{className:"h-4 w-4 inline mr-2"}),"Work Experience"]}),(0,a.jsxs)("button",{type:"button",onClick:F,className:"flex items-center text-blue-600 hover:text-blue-700 text-sm",disabled:l,children:[(0,a.jsx)(m.A,{className:"h-4 w-4 mr-1"}),"Add Experience"]})]}),(0,a.jsx)("div",{className:"space-y-4",children:y.workExperience.map((e,t)=>(0,a.jsxs)("div",{className:"p-4 border border-gray-200 dark:border-gray-600 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex justify-between items-start mb-3",children:[(0,a.jsxs)("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:["Experience ",t+1]}),y.workExperience.length>1&&(0,a.jsx)("button",{type:"button",onClick:()=>(e=>{let t=y.workExperience.filter((t,r)=>r!==e);f(e=>({...e,workExperience:t})),u(e=>({...e,[_]:{...e[_],workExperience:t}}))})(t),className:"text-red-600 hover:text-red-700",disabled:l,children:(0,a.jsx)(J.A,{className:"h-4 w-4"})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[(0,a.jsx)("input",{type:"text",value:e.jobTitle,onChange:e=>L(t,"jobTitle",e.target.value),placeholder:"Job Title",className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",disabled:l}),(0,a.jsx)("input",{type:"text",value:e.company,onChange:e=>L(t,"company",e.target.value),placeholder:"Company",className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",disabled:l}),(0,a.jsx)("input",{type:"text",value:e.duration,onChange:e=>L(t,"duration",e.target.value),placeholder:"Duration (e.g., 2020-2022)",className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",disabled:l})]})]},t))})]})]});case 2:return(0,a.jsx)("div",{className:"space-y-6",children:(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:[(0,a.jsx)(ew.A,{className:"h-4 w-4 inline mr-2"}),"Education"]}),(0,a.jsxs)("button",{type:"button",onClick:U,className:"flex items-center text-blue-600 hover:text-blue-700 text-sm",disabled:l,children:[(0,a.jsx)(m.A,{className:"h-4 w-4 mr-1"}),"Add Education"]})]}),(0,a.jsx)("div",{className:"space-y-4",children:y.education.map((e,t)=>(0,a.jsxs)("div",{className:"p-4 border border-gray-200 dark:border-gray-600 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex justify-between items-start mb-3",children:[(0,a.jsxs)("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:["Education ",t+1]}),y.education.length>1&&(0,a.jsx)("button",{type:"button",onClick:()=>(e=>{let t=y.education.filter((t,r)=>r!==e);f(e=>({...e,education:t})),u(e=>({...e,[_]:{...e[_],education:t}}))})(t),className:"text-red-600 hover:text-red-700",disabled:l,children:(0,a.jsx)(J.A,{className:"h-4 w-4"})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[(0,a.jsx)("input",{type:"text",value:e.degree,onChange:e=>R(t,"degree",e.target.value),placeholder:"Degree (e.g., Bachelor's in CS)",className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",disabled:l}),(0,a.jsx)("input",{type:"text",value:e.institution,onChange:e=>R(t,"institution",e.target.value),placeholder:"Institution",className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",disabled:l}),(0,a.jsx)("input",{type:"text",value:e.graduationYear,onChange:e=>R(t,"graduationYear",e.target.value),placeholder:"Graduation Year",className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",disabled:l})]})]},t))})]})});case 3:return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Skills / Keywords"}),(0,a.jsxs)("div",{className:"flex gap-2 mb-3",children:[(0,a.jsx)("input",{type:"text",value:k,onChange:e=>w(e.target.value),onKeyPress:e=>"Enter"===e.key&&(e.preventDefault(),O()),placeholder:"Add a skill and press Enter",className:"flex-1 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",disabled:l}),(0,a.jsx)("button",{type:"button",onClick:O,className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors",disabled:l,children:"Add"})]}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:y.skills.map((e,t)=>(0,a.jsxs)("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200",children:[e,(0,a.jsx)("button",{type:"button",onClick:()=>(e=>{let t=y.skills.filter(t=>t!==e);f(e=>({...e,skills:t})),u(e=>({...e,[_]:{...e[_],skills:t}}))})(e),className:"ml-2 text-blue-600 hover:text-blue-800",disabled:l,children:(0,a.jsx)(b.A,{className:"h-3 w-3"})})]},t))})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[(0,a.jsx)(eu.A,{className:"h-4 w-4 inline mr-2"}),"Expected Salary"]}),(0,a.jsx)("input",{type:"text",value:y.expectedSalary,onChange:e=>D("expectedSalary",e.target.value),placeholder:"e.g., $80,000 - $100,000 per year",className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",disabled:l})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[(0,a.jsx)(eu.A,{className:"h-4 w-4 inline mr-2"}),"Current CTC (if employed)"]}),(0,a.jsx)("input",{type:"text",value:y.currentCTC,onChange:e=>D("currentCTC",e.target.value),placeholder:"e.g., $70,000 per year",className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",disabled:l})]})]});case 4:return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("input",{type:"checkbox",id:"willingnessToRelocate",checked:y.willingnessToRelocate,onChange:e=>D("willingnessToRelocate",e.target.checked),className:"h-5 w-5 text-blue-600 border-gray-300 rounded focus:ring-blue-500",disabled:l}),(0,a.jsxs)("label",{htmlFor:"willingnessToRelocate",className:"ml-3 text-sm text-gray-700 dark:text-gray-300",children:[(0,a.jsx)(eN.A,{className:"h-4 w-4 inline mr-2"}),"Willing to relocate"]})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[(0,a.jsx)(e_.A,{className:"h-4 w-4 inline mr-2"}),"Work Authorization / Visa Status"]}),(0,a.jsxs)("select",{value:y.workAuthorization,onChange:e=>D("workAuthorization",e.target.value),className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",disabled:l,children:[(0,a.jsx)("option",{value:"",children:"Select work authorization"}),(0,a.jsx)("option",{value:"citizen",children:"Citizen"}),(0,a.jsx)("option",{value:"permanent_resident",children:"Permanent Resident"}),(0,a.jsx)("option",{value:"h1b",children:"H1B Visa"}),(0,a.jsx)("option",{value:"opt",children:"OPT"}),(0,a.jsx)("option",{value:"cpt",children:"CPT"}),(0,a.jsx)("option",{value:"l1",children:"L1 Visa"}),(0,a.jsx)("option",{value:"tn",children:"TN Visa"}),(0,a.jsx)("option",{value:"requires_sponsorship",children:"Requires Sponsorship"}),(0,a.jsx)("option",{value:"other",children:"Other"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[(0,a.jsx)(z.A,{className:"h-4 w-4 inline mr-2"}),"Notice Period"]}),(0,a.jsx)("input",{type:"text",value:y.noticePeriod,onChange:e=>D("noticePeriod",e.target.value),placeholder:"e.g., 2 weeks, 1 month, Immediate",className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",disabled:l})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[(0,a.jsx)(eA.A,{className:"h-4 w-4 inline mr-2"}),"Availability"]}),(0,a.jsx)("input",{type:"text",value:y.availability,onChange:e=>D("availability",e.target.value),placeholder:"e.g., Immediate, After 30 days, Flexible",className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",disabled:l})]})]});case 5:return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"References"}),(0,a.jsx)("textarea",{value:y.references,onChange:e=>D("references",e.target.value),rows:4,placeholder:"List your references (name, title, contact information)",className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",disabled:l})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:[(0,a.jsx)(I.A,{className:"h-4 w-4 inline mr-2"}),"Social Links"]}),(0,a.jsx)("div",{className:"space-y-3",children:Object.entries({linkedin:"LinkedIn",github:"GitHub",portfolio:"Portfolio",twitter:"Twitter",dribbble:"Dribbble",medium:"Medium"}).map(e=>{let[t,r]=e;return(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-xs text-gray-600 dark:text-gray-400 mb-1",children:r}),(0,a.jsx)("input",{type:"url",value:y.socialLinks[t]||"",onChange:e=>((e,t)=>{let r={...y.socialLinks,[e]:t};f(e=>({...e,socialLinks:r})),u(e=>({...e,[_]:{...e[_],socialLinks:r}}))})(t,e.target.value),placeholder:"https://".concat(t,".com/yourusername"),className:"w-full px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",disabled:l})]},t)})})]})]})}})(),(0,a.jsxs)("div",{className:"flex gap-4 pt-6",children:[(0,a.jsx)("button",{type:"button",onClick:e=>{e.preventDefault(),e.stopPropagation(),r()},className:"px-6 py-3 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",disabled:l,children:"Cancel"}),_>0&&(0,a.jsx)("button",{type:"button",onClick:e=>{if(e.preventDefault(),e.stopPropagation(),_>0){let e={...c,[_]:{...y}};u(e);let t=_-1;A(t);let r=e[t]||{};f(e=>({...e,...r})),n.current&&(n.current.scrollTop=0),console.log(" Moving to section ".concat(t,": ").concat(C[t]))}},className:"px-6 py-3 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",disabled:l,children:"Previous"}),_<C.length-1?(0,a.jsx)("button",{type:"button",onClick:e=>{if(e.preventDefault(),e.stopPropagation(),_<C.length-1){let e={...c,[_]:E(y,_)};u(e);let t=_+1;A(t);let r=e[t]||{};f(e=>({...e,...r})),n.current&&(n.current.scrollTop=0),console.log(" Moving to section ".concat(t,": ").concat(C[t]))}},className:"flex-1 px-6 py-3 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-lg hover:from-blue-700 hover:to-purple-700 transition-all",disabled:l,children:"Next"}):(0,a.jsx)("button",{type:"submit",disabled:l,className:"flex-1 px-6 py-3 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-lg hover:from-blue-700 hover:to-purple-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:l?(0,a.jsxs)("div",{className:"flex items-center justify-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Saving..."]}):"Save Profile"})]})]})]})},eS=e=>{let{onClose:t}=e,{user:r,userProfile:l}=(0,es.A)(),[i,o]=(0,s.useState)(!0),[n,d]=(0,s.useState)(null),[c,m]=(0,s.useState)(null),[u,x]=(0,s.useState)(null),p=(0,s.useRef)(null);(0,s.useEffect)(()=>{(async()=>{if(r)try{let e=await ea.getOrCreateProfile(r.uid,r.email||"",r.displayName||"New User");x(e)}catch(e){d("Failed to load profile data. Please try again.")}finally{o(!1)}})()},[r]);let g=async e=>{if(!r)return void d("No user found. Please login again.");o(!0),d(null),m(null);try{var a,s,l;let i={fullName:e.fullName,email:e.email,phone:e.phone,location:e.location,currentJobTitle:e.currentJobTitle,jobProfile:e.jobProfile,experience:e.experience,workExperience:e.workExperience,education:e.education,skills:e.skills,expectedSalary:e.expectedSalary,currentCTC:e.currentCTC,employmentType:e.employmentType,remoteJobsOnly:e.remoteJobsOnly,datePosted:e.datePosted,willingnessToRelocate:e.willingnessToRelocate,workAuthorization:e.workAuthorization,noticePeriod:e.noticePeriod,availability:e.availability,references:e.references,portfolio:null==(a=e.socialLinks)?void 0:a.portfolio,github:null==(s=e.socialLinks)?void 0:s.github,linkedin:null==(l=e.socialLinks)?void 0:l.linkedin};await ea.updateUserProfile(r.uid,i);let o=await ea.getUserProfile(r.uid);x(o),m("Profile saved successfully!"),setTimeout(()=>t(),2e3)}catch(e){d("Failed to save profile. Please try again.")}finally{o(!1)}};return(0,a.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",onClick:t,children:(0,a.jsx)("div",{ref:p,className:"bg-white dark:bg-gray-800 rounded-lg w-full max-w-4xl max-h-[90vh] overflow-y-auto p-6",onClick:e=>e.stopPropagation(),children:i?(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-blue-600 mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-xl text-gray-600 dark:text-gray-400",children:"Loading Profile..."})]}):(0,a.jsxs)(a.Fragment,{children:[n&&(0,a.jsxs)("div",{className:"mb-4 flex items-start space-x-2 p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:[(0,a.jsx)(W.A,{className:"w-5 h-5 text-red-500 flex-shrink-0 mt-0.5"}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("h4",{className:"text-sm font-medium text-red-800 dark:text-red-300",children:"Save Failed"}),(0,a.jsx)("p",{className:"text-sm text-red-700 dark:text-red-400 mt-1",children:n})]}),(0,a.jsx)("button",{onClick:()=>d(null),className:"text-red-400 hover:text-red-600 dark:hover:text-red-300",children:(0,a.jsx)(b.A,{className:"w-4 h-4"})})]}),c&&(0,a.jsxs)("div",{className:"mb-4 flex items-start space-x-2 p-3 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg",children:[(0,a.jsx)(X.A,{className:"w-5 h-5 text-green-500 flex-shrink-0 mt-0.5"}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("h4",{className:"text-sm font-medium text-green-800 dark:text-green-300",children:"Success"}),(0,a.jsx)("p",{className:"text-sm text-green-700 dark:text-green-400 mt-1",children:c})]}),(0,a.jsx)("button",{onClick:()=>m(null),className:"text-green-400 hover:text-green-600 dark:hover:text-green-300",children:(0,a.jsx)(b.A,{className:"w-4 h-4"})})]}),(0,a.jsx)(eP,{onSubmit:g,onCancel:t,isLoading:i,initialData:(()=>{let e=u||l;return e?"fullName"in e?{fullName:e.fullName||"",email:e.email||"",phone:e.phone||"",location:e.location||"",currentJobTitle:e.currentJobTitle||"",jobProfile:e.jobProfile||"",experience:e.experience||"Fresher",workExperience:e.workExperience||[{jobTitle:"",company:"",duration:""}],education:e.education||[{degree:"",institution:"",graduationYear:""}],skills:e.skills||[],expectedSalary:e.expectedSalary||"",currentCTC:e.currentCTC||"",employmentType:e.employmentType||"",remoteJobsOnly:e.remoteJobsOnly||!1,datePosted:e.datePosted||"",willingnessToRelocate:e.willingnessToRelocate||!1,workAuthorization:e.workAuthorization||"",noticePeriod:e.noticePeriod||"",availability:e.availability||"",references:e.references||"",socialLinks:{linkedin:e.linkedin||"",github:e.github||"",portfolio:e.portfolio||""}}:{fullName:e.full_name||"",email:e.email||"",phone:e.phone||"",location:e.location||"",currentJobTitle:e.current_job_title||"",jobProfile:e.job_profile||"",experience:e.experience||"Fresher",workExperience:e.work_experience||[{jobTitle:"",company:"",duration:""}],education:e.education||[{degree:"",institution:"",graduationYear:""}],skills:e.skills||[],expectedSalary:e.expected_salary||"",currentCTC:e.current_ctc||"",employmentType:e.employment_type||"",remoteJobsOnly:e.remote_jobs_only||!1,datePosted:e.date_posted||"",willingnessToRelocate:e.willingness_to_relocate||!1,workAuthorization:e.work_authorization||"",noticePeriod:e.notice_period||"",availability:e.availability||"",references:e.references||"",socialLinks:{linkedin:e.linkedin_url||"",github:e.github_url||"",portfolio:e.portfolio_url||""}}:{}})()})]})})})};class eC{static basePath(e){return"users/".concat(e,"/jobApplications")}static async getUserApplications(e){return er.getList(this.basePath(e))}static async getApplication(e,t){return er.read("".concat(this.basePath(e),"/").concat(t))}static async addApplication(e,t){let r={...t,user_id:e,created_at:new Date().toISOString(),last_updated:new Date().toISOString(),updated_at:new Date().toISOString(),location:t.location||null,job_posting_url:t.job_posting_url||null,job_description:t.job_description||null,notes:t.notes||null,resume_url:null,cover_letter_url:null,salary_range:t.salary_range||null,employment_type:t.employment_type||null,remote_option:t.remote_option||!1,contact_person:t.contact_person||null,contact_email:t.contact_email||null,interview_date:null,response_date:null,follow_up_date:null,priority:t.priority||1,source:t.source||null};return er.create(this.basePath(e),r)}static async updateApplication(e,t,r){let a={...r,last_updated:new Date().toISOString(),updated_at:new Date().toISOString()};return er.update("".concat(this.basePath(e),"/").concat(t),a)}static async deleteApplication(e,t){return er.delete("".concat(this.basePath(e),"/").concat(t))}static async getApplicationStats(e){let t=await this.getUserApplications(e),r={total:t.length,pending:0,interviews:0,offers:0,rejected:0,applied:0};return t.forEach(e=>{switch(e.status){case"not_applied":r.pending++;break;case"applied":r.applied++;break;case"interviewing":r.interviews++;break;case"offered":r.offers++;break;case"rejected":case"declined":r.rejected++}}),r}}let eT=()=>{let e=i(),t=o(e=>e.dashboard.showModal),r=o(e=>e.dashboard.showJobPreferencesModal),l=o(e=>e.dashboard.showJobSearchModal),c=o(e=>e.dashboard.showProfileModal),m=o(e=>e.dashboard.editingApplication),u=o(e=>e.dashboard.searchForm),x=o(e=>e.dashboard.searchResults),p=o(e=>e.dashboard.searchLoading),g=o(e=>e.dashboard.searchError),h=o(e=>e.dashboard.selectedJobDescription),[b,y]=(0,s.useState)([]),[f,j]=(0,s.useState)([]),[k,w]=(0,s.useState)(""),[N,A]=(0,s.useState)("all"),[E,P]=(0,s.useState)(!0),[S,C]=(0,s.useState)(""),[T,z]=(0,s.useState)({total:0,interviews:0,offers:0,pending:0,applied:0,rejected:0}),{user:I,userProfile:D,loading:F}=(0,es.A)(),{showSuccess:L,showError:U}=(0,eh.Y)(),J=(0,d.useRouter)(),R=async()=>{if(!I)return void console.log("[loadApplications] Aborted: No user.");console.log("[loadApplications] Starting to fetch applications and stats...");try{let[e,t]=await Promise.all([eC.getUserApplications(I.uid),eC.getApplicationStats(I.uid)]);console.log("[loadApplications] Successfully fetched data."),y(e),z(t)}catch(e){console.error("[loadApplications] Error:",e),C(e.message||"Failed to load applications")}};(0,s.useEffect)(()=>{if(console.log("[Dashboard Effect] Running effect..."),console.log("[Dashboard Effect] Auth Loading: ".concat(F,", User Present: ").concat(!!I)),F){console.log("[Dashboard Effect] Waiting for authentication to complete..."),P(!0);return}if(!I){console.log("[Dashboard Effect] No user found, redirecting to login."),J.push("/login");return}console.log("[Dashboard Effect] User is authenticated. Starting data load..."),P(!0),Promise.all([R(),(()=>{try{let e=localStorage.getItem("selectedJobs");if(e){let t=JSON.parse(e).map((e,t)=>({id:"workflow-".concat(Date.now(),"-").concat(t),user_id:(null==I?void 0:I.uid)||"",company_name:e.employer_name||"Unknown Company",position:e.job_title||"Unknown Position",status:"not_applied",application_date:new Date().toISOString().split("T")[0],job_posting_url:e.job_apply_link||"",job_description:e.job_description||"",notes:"",resume_url:null,cover_letter_url:null,created_at:new Date().toISOString(),updated_at:new Date().toISOString(),last_updated:new Date().toISOString(),location:null,salary_range:null,employment_type:null,remote_option:!1,contact_person:null,contact_email:null,interview_date:null,response_date:null,follow_up_date:null,priority:1,source:"workflow"}));j(e=>[...e,...t]),localStorage.removeItem("selectedJobs")}}catch(e){console.error("Error loading selected jobs from workflow:",e)}})()]).then(()=>{console.log("[Dashboard Effect] All data loading promises resolved.")}).catch(e=>{console.error("[Dashboard Effect] Error during data loading:",e)}).finally(()=>{console.log("[Dashboard Effect] Finalizing data load, setting loading to false."),P(!1)})},[I,F,J]);let Y=async()=>{if(I&&u.query){e((0,n.jL)(!0)),e((0,n.Xe)(""));try{let t={jobProfile:u.query,experience:"Fresher"===u.experience?"Fresher":"Experienced",location:u.location||"Remote",numPages:1},r=await eE.t.searchJobs(t);e((0,n.XS)(r.jobs||[])),r.jobs&&r.jobs.length>0?console.log("Found ".concat(r.jobs.length," job opportunities!")):e((0,n.Xe)("No jobs found. Try different search criteria."))}catch(t){e((0,n.Xe)(t.message||"Failed to search for jobs")),console.error("Error searching for jobs:",t)}finally{e((0,n.jL)(!1))}}},q=async e=>{if(!I)return void console.error("User not authenticated");try{let t={company_name:e.employer_name||"Unknown Company",position:e.job_title||"Unknown Position",status:"not_applied",application_date:new Date().toISOString(),job_posting_url:e.job_apply_link||"",job_description:e.job_description||"",notes:"Added from job search: ".concat(e.job_country||"Unknown location"),location:e.job_city||e.job_country||"",employment_type:e.job_employment_type||"",source:"job_search",remote_option:e.job_is_remote||!1,priority:1,salary_range:null,resume_url:null,cover_letter_url:null,contact_person:null,contact_email:null,interview_date:null,response_date:null,follow_up_date:null};await eC.addApplication(I.uid,t),L("Job Saved!",'"'.concat(e.job_title,'" at "').concat(e.employer_name,'" has been saved to your applications!')),await R()}catch(e){U("Error Saving Job",e.message||"An unexpected error occurred."),console.error("Error saving job from search:",e)}},B=async e=>{if(!I)return void U("Authentication Error","You must be logged in to save jobs.");L("Saving Jobs...","Attempting to save ".concat(e.length," jobs. Please wait."));let t=(await Promise.all(e.map(async e=>{try{let t={company_name:e.employer_name||"Unknown Company",position:e.job_title||"Unknown Position",status:"not_applied",application_date:new Date().toISOString(),job_posting_url:e.job_apply_link||"",job_description:e.job_description||"",notes:"Added from job search: ".concat(e.job_country||"Unknown location"),location:e.job_city||e.job_country||"",employment_type:e.job_employment_type||"",source:"job_search",remote_option:e.job_is_remote||!1,priority:1,salary_range:null,resume_url:null,cover_letter_url:null,contact_person:null,contact_email:null,interview_date:null,response_date:null,follow_up_date:null};return await eC.addApplication(I.uid,t)}catch(t){return console.error("Failed to save job: ".concat(e.job_title),t),null}}))).filter(e=>null!==e);t.length>0?(L("Jobs Saved!","".concat(t.length," of ").concat(e.length," jobs were successfully saved.")),await R()):U("Save Failed","Could not save any of the selected jobs.")},H=async t=>{if(I)try{C(""),m?(await eC.updateApplication(I.uid,m.id,t),L("Application Updated","The application has been successfully updated.")):(await eC.addApplication(I.uid,t),L("Application Added","The new application has been successfully added.")),await R(),e((0,n.pj)(!1))}catch(e){C(e.message||"Failed to save application"),U("Save Failed",e.message||"Could not save the application.")}},V=async e=>{if(I)try{C(""),await eC.deleteApplication(I.uid,e),await R(),L("Application Deleted","The application has been successfully removed.")}catch(e){C(e.message||"Failed to delete application"),U("Delete Failed",e.message||"Could not delete the application.")}},W=async(e,t)=>{if(I)try{C("");let r=b.find(t=>t.id===e);if(r&&"not_applied"===r.status&&"applied"===t){let a={...r,status:"applied"};await eC.addApplication(I.uid,a),j(t=>t.filter(t=>t.id!==e)),L("Application Status Updated","Status changed to ".concat(t,".")),await R();return}await eC.updateApplication(I.uid,e,{status:t}),await R()}catch(e){C(e.message||"Failed to update application status"),U("Update Failed",e.message||"Could not update application status.")}};return F?(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-blue-600 mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-xl text-gray-600 dark:text-gray-400",children:"Loading Dashboard..."})]})}):(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[(0,a.jsx)(v,{userProfile:D,onAddApplication:()=>{e((0,n.Ru)(null)),e((0,n.pj)(!0))},onJobPreferences:()=>{e((0,n.eV)(!0))},onUpdateProfile:()=>{e((0,n.qo)(!0))},onFindMoreJobs:()=>{e((0,n.g2)(!0))}}),(0,a.jsxs)("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[E&&(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-lg text-gray-600 dark:text-gray-400",children:"Loading applications..."})]}),S&&(0,a.jsx)("div",{className:"bg-red-50 dark:bg-red-900/30 text-red-600 dark:text-red-400 p-4 rounded-lg mb-6",children:S}),f.some(e=>e.id.startsWith("workflow-"))&&(0,a.jsxs)("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 dark:from-blue-900/20 dark:to-purple-900/20 border border-blue-200 dark:border-blue-700 rounded-xl p-6 mb-6",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,a.jsx)("div",{className:"w-10 h-10 bg-gradient-to-r from-blue-600 to-purple-600 rounded-full flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-white font-bold",children:""})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Welcome to Your Dashboard!"}),(0,a.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Great job! We've loaded your selected job opportunities. You can now manage applications, track progress, and discover more opportunities."})]})]}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-2 mt-4",children:[(0,a.jsxs)("span",{className:"px-3 py-1 bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-200 rounded-full text-sm",children:["\uD83C\uDFAF ",f.filter(e=>e.id.startsWith("workflow-")).length," Jobs Added"]}),(0,a.jsx)("span",{className:"px-3 py-1 bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-200 rounded-full text-sm",children:"\uD83D\uDCCA Dashboard Ready"}),(0,a.jsx)("span",{className:"px-3 py-1 bg-purple-100 dark:bg-purple-900/30 text-purple-800 dark:text-purple-200 rounded-full text-sm",children:"\uD83D\uDE80 Start Applying"})]})]}),(0,a.jsx)(_,{stats:T}),(0,a.jsx)("div",{className:"space-y-8",children:(0,a.jsx)(O,{applications:[...b,...f].map(e=>{var t;return{...e,updated_at:null!=(t=e.updated_at)?t:""}}),searchTerm:k,statusFilter:N,onSearchTermChange:w,onStatusFilterChange:A,onEditApplication:t=>{e((0,n.Ru)(t)),e((0,n.pj)(!0))},onViewJobDescription:t=>{e((0,n.o3)(t))},onDeleteApplication:V,onUpdateApplicationStatus:W})})]}),(0,a.jsx)(M,{isOpen:!!h,jobDescription:h,onClose:()=>e((0,n.o3)(null))}),t&&(0,a.jsx)(ec,{application:m,onSave:H,onClose:()=>e((0,n.pj)(!1))}),r&&(0,a.jsx)(eb,{onClose:()=>e((0,n.eV)(!1))}),c&&(0,a.jsx)(eS,{onClose:()=>e((0,n.qo)(!1))}),l&&(0,a.jsx)(ej,{isOpen:l,searchForm:u,searchResults:x,searchLoading:p,searchError:g,onClose:()=>e((0,n.g2)(!1)),onFormChange:t=>{e((0,n.XF)(t))},onSearch:Y,onSaveJob:q,onSaveMultipleJobs:B,onClear:()=>{e((0,n.XF)({query:"",location:"",experience:"",employment_type:"",date_posted:"",remote_jobs_only:!1})),e((0,n.XS)([])),e((0,n.Xe)(""))}})]})},ez=()=>(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(eT,{})})},6380:(e,t,r)=>{"use strict";r.d(t,{A:()=>u});var a=r(7876);r(4232);var s=r(2467),l=r(6124),i=r(4463),o=r(7297),n=r(3846),d=r(3276),c=r(672),m=r(4622);let u=e=>{let{isOpen:t,onClose:r,onConfirm:u,userProfile:x}=e;if(!t)return null;let p=[{icon:(0,a.jsx)(s.A,{className:"w-4 h-4"}),text:"Unlimited job applications tracking"},{icon:(0,a.jsx)(l.A,{className:"w-4 h-4"}),text:"AI-powered resume optimization"},{icon:(0,a.jsx)(i.A,{className:"w-4 h-4"}),text:"Advanced interview preparation"},{icon:(0,a.jsx)(o.A,{className:"w-4 h-4"}),text:"Priority customer support"},{icon:(0,a.jsx)(n.A,{className:"w-4 h-4"}),text:"Advanced analytics and insights"},{icon:(0,a.jsx)(d.A,{className:"w-4 h-4"}),text:"Custom job alerts and notifications"}];return(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-2xl max-w-md w-full max-h-[90vh] overflow-y-auto shadow-2xl",children:[(0,a.jsxs)("div",{className:"relative p-6 pb-4",children:[(0,a.jsx)("button",{onClick:r,className:"absolute top-4 right-4 p-1 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:(0,a.jsx)(c.A,{size:20,className:"text-gray-500"})}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-gradient-to-r from-purple-600 to-pink-600 rounded-full mb-4",children:(0,a.jsx)(i.A,{size:32,className:"text-white"})}),(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"Upgrade to Pro"}),(0,a.jsx)("p",{className:"text-gray-600 dark:text-gray-300",children:"Unlock powerful features to accelerate your job search"})]})]}),(0,a.jsx)("div",{className:"px-6 pb-4",children:(0,a.jsxs)("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 dark:from-purple-900/20 dark:to-pink-900/20 rounded-xl p-4 text-center border border-purple-200 dark:border-purple-700",children:[(0,a.jsxs)("div",{className:"flex items-center justify-center gap-2 mb-3",children:[(0,a.jsx)(l.A,{className:"text-yellow-500",size:20}),(0,a.jsx)("span",{className:"text-sm font-medium text-purple-700 dark:text-purple-300",children:"SPECIAL OFFER"})]}),(0,a.jsxs)("div",{className:"flex items-center justify-center gap-2 mb-2",children:[(0,a.jsx)("span",{className:"text-4xl font-bold text-purple-600 dark:text-purple-400",children:"$29"}),(0,a.jsx)("span",{className:"text-gray-500 dark:text-gray-400",children:"/month"})]}),(0,a.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-300 mb-2",children:"MockInterview Pro Subscription"}),(0,a.jsx)("div",{className:"text-xs text-green-600 dark:text-green-400 font-medium",children:"\uD83C\uDF89 7-day free trial  Cancel anytime"})]})}),(0,a.jsxs)("div",{className:"px-6 pb-6",children:[(0,a.jsx)("h3",{className:"font-semibold text-gray-900 dark:text-white mb-3",children:"What's included:"}),(0,a.jsx)("div",{className:"space-y-3",children:p.map((e,t)=>(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"flex-shrink-0 w-6 h-6 bg-emerald-100 dark:bg-emerald-900/30 rounded-full flex items-center justify-center",children:(0,a.jsx)(d.A,{size:12,className:"text-emerald-600 dark:text-emerald-400"})}),(0,a.jsx)("div",{className:"text-purple-600 dark:text-purple-400",children:e.icon}),(0,a.jsx)("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:e.text})]},t))})]}),x&&(0,a.jsx)("div",{className:"px-6 pb-4",children:(0,a.jsxs)("div",{className:"bg-gray-50 dark:bg-gray-700/50 rounded-lg p-3",children:[(0,a.jsx)("div",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1",children:"Upgrading account for:"}),(0,a.jsx)("div",{className:"font-medium text-gray-900 dark:text-white",children:x.full_name||x.email||"Current User"})]})}),(0,a.jsxs)("div",{className:"px-6 pb-6 space-y-3",children:[(0,a.jsxs)("button",{onClick:u,className:"w-full bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 text-white py-4 px-4 rounded-xl font-semibold flex items-center justify-center gap-2 transition-all transform hover:scale-105 shadow-lg hover:shadow-xl relative overflow-hidden group",children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-purple-400 to-pink-400 opacity-0 group-hover:opacity-20 transition-opacity"}),(0,a.jsx)(n.A,{size:20,className:"relative z-10"}),(0,a.jsx)("span",{className:"relative z-10",children:"Start Free Trial"}),(0,a.jsx)(m.A,{size:18,className:"relative z-10"})]}),(0,a.jsx)("button",{onClick:r,className:"w-full bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-300 py-3 px-4 rounded-xl font-medium transition-colors",children:"Maybe Later"})]}),(0,a.jsxs)("div",{className:"px-6 pb-6 text-center",children:[(0,a.jsxs)("div",{className:"flex items-center justify-center gap-2 text-xs text-gray-500 dark:text-gray-400 mb-2",children:[(0,a.jsx)(o.A,{size:14}),(0,a.jsx)("span",{children:"Secure checkout powered by RevenueCat"})]}),(0,a.jsx)("p",{className:"text-xs text-gray-400 dark:text-gray-500",children:"SSL encrypted  30-day money-back guarantee"})]})]})})}},7069:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});var a=r(4232),s=r(3712),l=r(9320),i=r(2964);class o{static async getOrCreateProfile(e,t,r){let a=(0,i.H9)(l.db,"users",e),s=await (0,i.x7)(a);if(s.exists())return{...s.data(),id:e};{let s={id:e,email:t,full_name:r,created_at:new Date().toISOString()};return await (0,i.BN)(a,s),s}}}let n=()=>{let[e,t]=(0,a.useState)(null),[r,l]=(0,a.useState)(null),[i,n]=(0,a.useState)(!0);return(0,a.useEffect)(()=>{(async()=>{try{let e=await s.A.getCurrentUser();if(t(e),e)try{let t=await o.getOrCreateProfile(e.uid,e.email||"",e.displayName||"");l(t)}catch(e){console.error("Failed to get or create user profile:",e)}else l(null)}catch(e){console.error("Failed to initialize auth:",e)}finally{n(!1)}})();let e=s.A.onAuthStateChange(async e=>{if(t(e),e)try{let t=await o.getOrCreateProfile(e.uid,e.email||"",e.displayName||"");l(t)}catch(e){console.error("Failed to update user profile on auth change:",e)}else l(null);n(!1)});return()=>{e()}},[]),(0,a.useMemo)(()=>({user:e,userProfile:r,loading:i,isAuthenticated:!!e}),[e,r,i])}},7580:(e,t,r)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard",function(){return r(5163)}])},9320:(e,t,r)=>{"use strict";r.d(t,{db:()=>d,j2:()=>n});var a=r(6042),s=r(9917),l=r(2964),i=r(1972);let o=(0,a.Wp)({apiKey:"AIzaSyDBdAWFGw0acg3IBSh9NZPp_m6WiyaW_qA",authDomain:"myjobsearchagent.firebaseapp.com",projectId:"myjobsearchagent",storageBucket:"myjobsearchagent.appspot.com",messagingSenderId:"948357728656",appId:"1:948357728656:web:5c1f7ef5658d7efcd0cb15",measurementId:"G-3V87TEMNEV"}),n=(0,s.xI)(o),d=(0,l.aU)(o);(0,i.P5)(o)},9980:(e,t,r)=>{"use strict";r.d(t,{t:()=>a});class a{static async searchJobs(e){try{var t;if(!this.JSEARCH_API_KEY)throw Error("JSEARCH_API_KEY is not configured. Please add it to your .env file.");let r=e.location.includes(",")?null==(t=e.location.split(",").pop())?void 0:t.trim():e.location,a="".concat(e.jobProfile," jobs in ").concat(r);"experienced"===e.experience.toLowerCase()?a+=" senior":"fresher"===e.experience.toLowerCase()&&(a+=" entry level");let s=new URLSearchParams({query:a,page:"1",num_pages:(e.numPages||1).toString(),country:"us",date_posted:"all"}),l=await fetch("".concat(this.JSEARCH_BASE_URL,"?").concat(s.toString()),{method:"GET",headers:{"X-RapidAPI-Host":this.JSEARCH_API_HOST,"X-RapidAPI-Key":this.JSEARCH_API_KEY}});if(!l.ok){let e=await l.text();throw console.error("Job search API error response:",e),Error("Job search API error: ".concat(l.status," - ").concat(e))}let i=await l.json();if(!i.data||!Array.isArray(i.data))return console.warn("No jobs data found in response:",i),{message:"No jobs found",jobs:[],search_criteria:{job_profile:e.jobProfile,experience:e.experience,location:e.location},success:!0};let o=i.data.map((e,t)=>{t<3&&console.log("Sample job data ".concat(t+1,":"),e);let r=e.job_city||"",a=e.job_state||"",s=e.job_country||"",l=[r,a,s].filter(Boolean).join(", ")||e.job_location||e.employer_location||"N/A",i={job_title:e.job_title||"N/A",employer_name:e.employer_name||"N/A",job_city:e.job_city||"",job_state:e.job_state||"",job_country:e.job_country||"",job_is_remote:e.job_is_remote||!1,job_apply_link:e.job_apply_link||e.job_url||"",job_employment_type:e.job_employment_type||"N/A",job_posted_at_datetime_utc:e.job_posted_at_datetime_utc||"",job_salary_currency:e.job_salary_currency||"",job_min_salary:e.job_min_salary||void 0,job_max_salary:e.job_max_salary||void 0,job_salary_period:e.job_salary_period||"",job_experience_in_place_of_education:e.job_experience_in_place_of_education||!1,job_description:e.job_description||"No description available",job_url:e.job_url||e.job_apply_link||"",location:l};return t<3&&console.log("Mapped job ".concat(t+1,":"),i),i}).filter(e=>"N/A"!==e.job_title&&"N/A"!==e.employer_name);return console.log("Successfully mapped ".concat(o.length," jobs from ").concat(i.data.length," raw results")),{message:"Found ".concat(o.length," jobs for ").concat(e.jobProfile," in ").concat(e.location),jobs:o,search_criteria:{job_profile:e.jobProfile,experience:e.experience,location:e.location},success:!0}}catch(e){throw console.error("Error searching jobs:",e),Error("Error searching jobs: ".concat(e instanceof Error?e.message:"Unknown error"))}}static validateSearchParams(e){return e.jobProfile&&0!==e.jobProfile.trim().length?e.location&&0!==e.location.trim().length?["Fresher","Experienced"].includes(e.experience)?{isValid:!0}:{isValid:!1,error:'Experience must be either "Fresher" or "Experienced"'}:{isValid:!1,error:"Location is required"}:{isValid:!1,error:"Job profile is required"}}static getPopularLocations(){return["New York, NY","San Francisco, CA","Chicago, IL","Austin, TX","Seattle, WA","Boston, MA","Denver, CO","Atlanta, GA","Los Angeles, CA","Remote"]}static getCommonJobProfiles(){return["Software Developer","Data Scientist","Frontend Developer","Backend Developer","Full Stack Developer","DevOps Engineer","Product Manager","UI/UX Designer","Quality Assurance Engineer","Machine Learning Engineer"]}}a.JSEARCH_API_KEY="dfa377a0fbmsh8df80548e982bc2p1300b3jsnd59691bcf380",a.JSEARCH_API_HOST="jsearch.p.rapidapi.com",a.JSEARCH_BASE_URL="https://jsearch.p.rapidapi.com/search"}},e=>{e.O(0,[671,166,591,341,5,155,274,0,524,636,593,792],()=>e(e.s=7580)),_N_E=e.O()}]);